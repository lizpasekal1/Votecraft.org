<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Why RCV Matters - Votecraft</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: transparent;
            margin: 0;
            padding: 8px;
        }
    </style>
    <link rel="stylesheet" href="../src/css/widgets/rcv-story-widget.css?v=1">
</head>
<body>
    <div class="rcv-story-widget">
        <!-- Progress Indicator -->
        <div class="progress-steps">
            <div class="step-dot active" data-step="0"></div>
            <div class="step-dot" data-step="1"></div>
            <div class="step-dot" data-step="2"></div>
            <div class="step-dot" data-step="3"></div>
            <div class="step-dot" data-step="4"></div>
        </div>

        <div class="stages-container">

            <!-- Stage 1: The Problem with Winner-Take-All -->
            <div class="stage active" data-stage="0">
                <div class="section-header problem">
                    <h3>Percent Threshold Voting is Toxic</h3>
                    <p>Here's what's wrong with our current voting system...</p>
                </div>
                <div class="problem-grid">
                    <div class="problem-card" data-delay="0">
                        <span class="problem-icon">‚ö†Ô∏è</span>
                        <p class="problem-text">It elects someone <strong>most don't want</strong>, simply because similar awesome candidates split votes. üò§</p>
                    </div>
                    <div class="problem-card" data-delay="1">
                        <span class="problem-icon">‚ö†Ô∏è</span>
                        <p class="problem-text">Winners represent the <strong>minimum winning threshold</strong> in a two party system. üìâ</p>
                    </div>
                    <div class="problem-card" data-delay="2">
                        <span class="problem-icon">‚ö†Ô∏è</span>
                        <p class="problem-text">The system <strong>discourages leaders</strong> from raising new ideas or challenging their own party, out of fear they'll split/divide support. ü§ê</p>
                    </div>
                    <div class="problem-card" data-delay="3">
                        <span class="problem-icon">‚ö†Ô∏è</span>
                        <p class="problem-text">This fuels the <strong>polarized negativity</strong> we see today. üò°</p>
                    </div>
                </div>
            </div>

            <!-- Stage 2: Why RCV is Better -->
            <div class="stage" data-stage="1">
                <div class="section-header solution">
                    <h3>RCV is Better</h3>
                    <p>Here's why Ranked Choice Voting fixes these problems...</p>
                </div>
                <div class="solution-grid">
                    <div class="solution-card" data-delay="0">
                        <span class="solution-icon">‚≠ê</span>
                        <p class="solution-text">If your first choice can't win, <strong>your vote isn't trashed</strong>&#8212;it moves to your next preference. üéâ</p>
                    </div>
                    <div class="solution-card" data-delay="1">
                        <span class="solution-icon">‚≠ê</span>
                        <p class="solution-text">Elections reflect <strong>who most actually prefer</strong>, not who squeaked by with the lowest-minority. ü•≥</p>
                    </div>
                    <div class="solution-card" data-delay="2">
                        <span class="solution-icon">‚≠ê</span>
                        <p class="solution-text">The system <strong>encourages leaders</strong> to raise new ideas without fear of splitting the vote. üí°</p>
                    </div>
                    <div class="solution-card" data-delay="3">
                        <span class="solution-icon">‚≠ê</span>
                        <p class="solution-text">It rewards <strong>consensus instead of division</strong>, which is a fairer more collaborative outcome. ü§ù</p>
                    </div>
                </div>
            </div>

            <!-- Stage 3: Side-by-Side Comparison -->
            <div class="stage" data-stage="2">
                <div class="section-header">
                    <h3 style="color: #fff;">The Difference</h3>
                    <p>See how these systems compare...</p>
                </div>
                <div class="comparison-container">
                    <div class="comparison-panels">
                        <div class="comparison-panel wta" data-delay="0">
                            <div class="panel-icon">‚ö†Ô∏è</div>
                            <div class="panel-header">Percent Threshold Voting</div>
                            <ul class="panel-points">
                                <li>‚ö†Ô∏è Vote splitting elects unpopular winners</li>
                                <li>‚ö†Ô∏è Your vote is wasted if your candidate loses</li>
                                <li>‚ö†Ô∏è Encourages negative campaigning</li>
                                <li>‚ö†Ô∏è Forces two-party dominance</li>
                                <li>‚ö†Ô∏è Winners can win with tiny minorities</li>
                            </ul>
                        </div>
                        <div class="comparison-panel rcv" data-delay="1">
                            <div class="panel-icon">&#10003;</div>
                            <div class="panel-header">Ranked Choice Voting</div>
                            <ul class="panel-points">
                                <li>&#10003; Similar candidates don't split the vote</li>
                                <li>&#10003; Your vote always counts for someone</li>
                                <li>&#10003; Rewards coalition-building</li>
                                <li>&#10003; More voices, more choices</li>
                                <li>&#10003; Winners need broad support</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stage 4: The Rigged Game Cycle -->
            <div class="stage" data-stage="3">
                <div class="section-header problem">
                    <h3>The Polarization Spiral</h3>
                    <p>Percent Threshold Voting creates a vicious cycle that keeps us trapped...</p>
                </div>
                <div class="cycle-container">
                    <div class="cycle-diagram">
                        <div class="cycle-center"></div>
                        <div class="cycle-node" data-position="top"><span class="node-emoji">‚öîÔ∏è</span><span class="node-text">Two-Party System</span></div>
                        <div class="cycle-node" data-position="right"><span class="node-emoji">üò∞</span><span class="node-text">Vote Splitting Fears</span></div>
                        <div class="cycle-node" data-position="bottom"><span class="node-emoji">üì¢</span><span class="node-text">Negative Campaigning</span></div>
                        <div class="cycle-node" data-position="left"><span class="node-emoji">üò§</span><span class="node-text">Polarized Winners</span></div>
                        <div class="cycle-arrow" data-position="top-right">‚ûú</div>
                        <div class="cycle-arrow" data-position="right-bottom">‚ûú</div>
                        <div class="cycle-arrow" data-position="bottom-left">‚ûú</div>
                        <div class="cycle-arrow" data-position="left-top">‚ûú</div>
                    </div>
                    <div class="cycle-explanation">
                        <p>Two-party dominance ‚Üí voters fear splitting the vote ‚Üí campaigns go negative to attack opponents ‚Üí polarized winners get elected ‚Üí the cycle reinforces itself...</p>
                        <p class="cycle-highlight"><strong>RCV breaks this cycle</strong> by letting you rank your choices without fear!</p>
                    </div>
                </div>
            </div>

            <!-- Stage 5: Call to Action -->
            <div class="stage" data-stage="4">
                <div class="final-stage">
                    <div class="final-icon">&#10003;</div>
                    <div class="final-message">
                        <h3>A Better Way to Vote</h3>
                        <p>
                            With <strong>Ranked Choice Voting</strong>, elections become about finding the candidate <strong>most people can support</strong>&#8212;not just the one who benefits from a divided opposition.
                        </p>
                        <p>
                            It's simple: rank your choices 1, 2, 3. If your first pick can't win, your vote goes to your next choice. <strong>Your voice is always heard!</strong>
                        </p>
                        <p>
                            That's how we build a democracy that works for everyone.
                        </p>
                    </div>
                </div>
            </div>

        </div>

        <!-- Navigation -->
        <div class="nav-controls">
            <button class="nav-btn" id="prevBtn" onclick="changeStage(-1)" disabled>&#8592; Back</button>
            <button class="nav-btn primary" id="nextBtn" onclick="changeStage(1)">Next &#8594;</button>
        </div>
    </div>

    <script src="../src/js/widgets/rcv-story.js?v=1"></script>
    <script>
        function sendHeight() {
            // Get height from the widget element
            const widget = document.querySelector('.rcv-story-widget');
            let height = widget ? widget.offsetHeight : document.body.scrollHeight;
            // Cap at reasonable maximum (1500px) to prevent runaway growth
            height = Math.min(height, 1500);
            window.parent.postMessage({ type: 'rcv-story-resize', height: height }, '*');
        }

        // Send height on load and when content changes
        window.addEventListener('load', sendHeight);
        window.addEventListener('resize', sendHeight);
        new MutationObserver(sendHeight).observe(document.body, {
            childList: true,
            subtree: true,
            attributes: true
        });

        // Also send periodically during animations
        setInterval(sendHeight, 200);
    </script>
</body>
</html>
