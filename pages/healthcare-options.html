<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Healthcare Widget Options - Votecraft</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #5087e5;
            --primary-dark: #3a6bc7;
            --text: #32373c;
            --text-light: #666;
            --background: #f5f5f5;
            --white: #ffffff;
            --border: #e0e0e0;
            --green: #10b981;
            --red: #ef4444;
            --red-dark: #b91c1c;
            --orange: #f59e0b;
            --purple: #8b5cf6;
            --yellow: #eab308;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Open Sans', Arial, sans-serif;
            color: var(--text);
            background: var(--background);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        h1 {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 12px;
            color: var(--text);
        }

        .subtitle {
            text-align: center;
            color: var(--text-light);
            margin-bottom: 40px;
            font-size: 1.1rem;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
        }

        @media (max-width: 900px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        .option-card {
            background: var(--white);
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .option-card.full-width {
            grid-column: 1 / -1;
        }

        .option-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .option-number {
            width: 36px;
            height: 36px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .option-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text);
        }

        .option-description {
            color: var(--text-light);
            margin-bottom: 20px;
            font-size: 0.95rem;
        }

        /* Option 1: Cost Comparison Demo */
        .cost-demo {
            background: var(--background);
            border-radius: 8px;
            padding: 20px;
        }

        .cost-demo h4 {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .slider-container {
            margin-bottom: 20px;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .slider {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: var(--border);
            border-radius: 4px;
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
        }

        .cost-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 16px;
        }

        .cost-box {
            padding: 16px;
            border-radius: 8px;
            text-align: center;
        }

        .cost-box.current {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        .cost-box.universal {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        .cost-box-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .cost-box.current .cost-box-label { color: var(--red); }
        .cost-box.universal .cost-box-label { color: var(--green); }

        .cost-box-amount {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .cost-box.current .cost-box-amount { color: var(--red); }
        .cost-box.universal .cost-box-amount { color: var(--green); }

        .cost-box-detail {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 4px;
        }

        /* Income-based Healthcare Cost Visualization */
        .income-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 16px;
        }

        .income-btn {
            flex: 1;
            min-width: 80px;
            padding: 10px 8px;
            border: 2px solid var(--border);
            background: var(--white);
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .income-btn:hover {
            border-color: var(--primary);
        }

        .income-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .income-btn.disabled {
            opacity: 0.4;
            cursor: not-allowed;
            background: var(--background);
        }

        .income-btn.disabled:hover {
            border-color: var(--border);
        }

        .income-btn .income-label {
            display: block;
            font-size: 0.7rem;
            opacity: 0.8;
            margin-top: 2px;
        }

        .income-btn .income-pct {
            display: block;
            font-size: 0.65rem;
            opacity: 0.7;
            margin-top: 3px;
            font-weight: 400;
        }

        .income-visual {
            background: var(--white);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .income-bar-container {
            margin-bottom: 16px;
        }

        .income-bar-label {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            margin-bottom: 6px;
        }

        .income-bar-label strong {
            color: var(--text);
        }

        .income-bar {
            height: 32px;
            background: var(--border);
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }

        .income-bar-fill {
            height: 100%;
            display: flex;
            transition: width 0.5s ease-out;
        }

        .income-bar-segment {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 600;
            color: white;
            transition: width 0.5s ease-out;
        }

        .income-bar-segment.your-share {
            background: var(--red-dark);
        }

        .income-bar-segment.employer-share {
            background: var(--purple);
        }

        .income-bar-segment.oop-share {
            background: var(--red);
        }

        .income-bar-segment.remaining {
            background: var(--green);
        }

        .bar-legend {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            font-size: 0.75rem;
            margin-top: 8px;
            justify-content: center;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 4px;
            color: var(--text-light);
        }

        .legend-dot {
            width: 10px;
            height: 10px;
            border-radius: 2px;
        }

        .legend-dot.your-share { background: var(--red-dark); }
        .legend-dot.employer-share { background: var(--purple); }
        .legend-dot.oop-share { background: var(--red); }
        .legend-dot.remaining { background: var(--green); }

        .income-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 16px;
        }

        .income-compare-box {
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }

        .income-compare-box.current {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        .income-compare-box.universal {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        .income-compare-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .income-compare-box.current .income-compare-label { color: var(--red); }
        .income-compare-box.universal .income-compare-label { color: var(--green); }

        .income-compare-pct {
            font-size: 1.75rem;
            font-weight: 700;
        }

        .income-compare-box.current .income-compare-pct { color: var(--red); }
        .income-compare-box.universal .income-compare-pct { color: var(--green); }

        .income-compare-detail {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 4px;
        }

        .income-impact {
            margin-top: 16px;
            padding: 14px;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .income-impact.regressive {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
            color: var(--text);
        }

        .income-impact.regressive strong {
            color: var(--red);
        }

        .income-impact.progressive {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.2);
            color: var(--text);
        }

        .income-impact.progressive strong {
            color: var(--green);
        }

        .employment-note {
            margin-top: 12px;
            padding: 10px 12px;
            border-radius: 6px;
            font-size: 0.8rem;
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.2);
            color: var(--text);
        }

        .employment-note strong {
            color: var(--purple);
        }

        .employment-note.warning {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        .employment-note.warning strong {
            color: var(--red);
        }

        /* State Selector */
        .state-selector {
            margin-bottom: 16px;
        }

        .state-selector select {
            width: 100%;
            padding: 10px 12px;
            font-size: 0.9rem;
            font-family: inherit;
            border: 2px solid var(--border);
            border-radius: 6px;
            background: var(--white);
            color: var(--text);
            cursor: pointer;
            transition: border-color 0.2s;
        }

        .state-selector select:hover,
        .state-selector select:focus {
            border-color: var(--primary);
            outline: none;
        }

        /* Cost Breakdown Grid */
        .cost-breakdown-grid {
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-bottom: 16px;
        }

        .cost-breakdown-header {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .cost-line {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 10px;
            background: var(--background);
            border-radius: 4px;
            font-size: 0.85rem;
        }

        .cost-line.hidden-cost {
            background: rgba(239, 68, 68, 0.08);
            border: 1px dashed rgba(239, 68, 68, 0.3);
        }

        .cost-line.hidden-cost .cost-line-amount {
            color: var(--red);
        }

        .hidden-tag {
            font-size: 0.7rem;
            background: var(--red);
            color: white;
            padding: 2px 6px;
            border-radius: 3px;
            margin-left: 6px;
            font-weight: 600;
        }

        .cost-line.total {
            background: var(--text);
            color: white;
            font-weight: 600;
            margin-top: 4px;
        }

        .cost-line.total .cost-line-amount {
            color: white;
            font-size: 1rem;
        }

        .cost-line-label {
            color: var(--text);
        }

        .cost-line.total .cost-line-label {
            color: white;
        }

        .cost-line-amount {
            font-weight: 600;
            color: var(--text);
        }

        .cost-line.no-employer {
            display: none;
        }

        /* Cost Breakdown Rows */
        .cost-breakdown {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 16px;
        }

        .cost-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 12px;
            background: var(--white);
            border-radius: 6px;
            border-left: 3px solid var(--border);
        }

        .cost-row.visible {
            border-left-color: var(--text-light);
        }

        .cost-row-label {
            font-size: 0.9rem;
            color: var(--text);
        }

        .cost-row-amount {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text);
        }

        .cost-row-subtotal {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 12px;
            background: rgba(102, 102, 102, 0.1);
            border-radius: 6px;
            margin-top: 4px;
        }

        .cost-row-subtotal .cost-row-label {
            font-weight: 600;
            font-style: italic;
        }

        .cost-row-subtotal .cost-row-amount {
            color: var(--text-light);
        }

        .cost-row.hidden-cost {
            border-left-color: var(--orange);
            background: rgba(245, 158, 11, 0.1);
            margin-top: 8px;
        }

        .cost-row.hidden-cost .cost-row-label {
            color: #b45309;
        }

        .cost-row.hidden-cost .cost-row-amount {
            color: var(--orange);
            font-size: 1.1rem;
        }

        .cost-row-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 12px;
            background: rgba(239, 68, 68, 0.1);
            border-radius: 6px;
            border: 2px solid rgba(239, 68, 68, 0.3);
            margin-top: 4px;
        }

        .cost-row-total .cost-row-label {
            font-weight: 700;
            color: var(--red);
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.5px;
        }

        .cost-row-total .cost-row-amount {
            color: var(--red);
            font-size: 1.4rem;
        }

        /* Option 2: Follow the Dollar Demo */
        .dollar-demo {
            background: var(--background);
            border-radius: 8px;
            padding: 20px;
        }

        .dollar-flow {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .dollar-bar {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .dollar-bar-label {
            width: 120px;
            font-size: 0.8rem;
            text-align: right;
        }

        .dollar-bar-track {
            flex: 1;
            height: 24px;
            background: var(--border);
            border-radius: 4px;
            overflow: hidden;
        }

        .dollar-bar-fill {
            height: 100%;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 8px;
            font-size: 0.75rem;
            color: white;
            font-weight: 600;
        }

        .dollar-bar-fill.admin { background: var(--red); }
        .dollar-bar-fill.billing { background: var(--orange); }
        .dollar-bar-fill.pharma { background: var(--purple); }
        .dollar-bar-fill.care { background: var(--green); }

        .dollar-toggle {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }

        .dollar-toggle-btn {
            flex: 1;
            padding: 8px 16px;
            border: 2px solid var(--border);
            background: var(--white);
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .dollar-toggle-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Option 3: Country Comparison Demo */
        .country-demo {
            background: var(--background);
            border-radius: 8px;
            padding: 20px;
        }

        .country-select {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .country-btn {
            padding: 8px 16px;
            border: 2px solid var(--border);
            background: var(--white);
            border-radius: 6px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .country-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .country-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .country-stat {
            background: var(--white);
            padding: 12px;
            border-radius: 6px;
            text-align: center;
        }

        .country-stat-label {
            font-size: 0.75rem;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .country-stat-value {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary);
        }

        .country-stat-note {
            font-size: 0.75rem;
            color: var(--text-light);
        }

        /* Option 4: Risk Pool Demo */
        .pool-demo {
            background: var(--background);
            border-radius: 8px;
            padding: 20px;
        }

        .pool-visual {
            display: flex;
            gap: 20px;
            margin-bottom: 16px;
        }

        .pool {
            flex: 1;
            text-align: center;
        }

        .pool-label {
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .pool-people {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            justify-content: center;
            padding: 12px;
            background: var(--white);
            border-radius: 8px;
            min-height: 80px;
        }

        .person {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }

        .person.healthy { background: var(--green); }
        .person.sick { background: var(--red); }

        .pool-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 8px;
            font-size: 0.75rem;
            color: var(--text-light);
        }

        .pool-insight {
            background: rgba(80, 135, 229, 0.1);
            border: 1px solid rgba(80, 135, 229, 0.2);
            border-radius: 6px;
            padding: 12px;
            font-size: 0.85rem;
            color: var(--text);
        }

        .pool-insight strong {
            color: var(--primary);
        }

        .pool-controls {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .pool-btn {
            padding: 10px 16px;
            border: 2px solid var(--border);
            background: var(--white);
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .pool-btn:hover {
            border-color: var(--primary);
        }

        .pool-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .pool-btn.danger {
            border-color: var(--red);
            color: var(--red);
        }

        .pool-btn.danger:hover {
            background: var(--red);
            color: white;
        }

        .pool-cost {
            text-align: center;
            padding: 12px;
            background: var(--white);
            border-radius: 6px;
            margin-top: 8px;
        }

        .pool-cost-label {
            font-size: 0.75rem;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .pool-cost-value {
            font-size: 1.25rem;
            font-weight: 700;
        }

        .pool-cost-value.high { color: var(--red); }
        .pool-cost-value.medium { color: var(--orange); }
        .pool-cost-value.low { color: var(--green); }

        .pool-event {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 6px;
            padding: 10px 12px;
            margin-top: 12px;
            font-size: 0.85rem;
            color: var(--red);
            display: none;
        }

        .pool-event.show { display: block; }
        .pool-event.success {
            background: rgba(16, 185, 129, 0.1);
            border-color: rgba(16, 185, 129, 0.3);
            color: var(--green);
        }

        /* Data Sources Collapsible */
        .data-sources {
            margin-top: 16px;
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
        }

        .data-sources-toggle {
            width: 100%;
            padding: 12px 16px;
            background: var(--white);
            border: none;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text);
            transition: background 0.2s;
        }

        .data-sources-toggle:hover {
            background: var(--background);
        }

        .data-sources-toggle .icon {
            transition: transform 0.2s;
        }

        .data-sources-toggle.open .icon {
            transform: rotate(180deg);
        }

        .data-sources-content {
            display: none;
            padding: 16px;
            background: var(--background);
            border-top: 1px solid var(--border);
        }

        .data-sources-content.open {
            display: block;
        }

        .source-item {
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border);
        }

        .source-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .source-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-light);
            margin-bottom: 4px;
        }

        .source-text {
            font-size: 0.85rem;
            color: var(--text);
            line-height: 1.5;
        }

        .source-text a {
            color: var(--primary);
            text-decoration: none;
        }

        .source-text a:hover {
            text-decoration: underline;
        }

        .source-note {
            font-size: 0.8rem;
            color: var(--text-light);
            font-style: italic;
            margin-top: 8px;
            padding: 8px 12px;
            background: var(--white);
            border-radius: 4px;
        }

        /* Inline Source Citations */
        .inline-source {
            font-size: 0.7rem;
            color: var(--text-light);
            margin-top: 4px;
        }

        .inline-source a {
            color: var(--primary);
            text-decoration: none;
        }

        .inline-source a:hover {
            text-decoration: underline;
        }

        /* Option 5: Scenario Demo */
        .scenario-demo {
            background: var(--background);
            border-radius: 8px;
            padding: 20px;
        }

        .scenario-select {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .scenario-btn {
            padding: 10px 14px;
            border: 2px solid var(--border);
            background: var(--white);
            border-radius: 6px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .scenario-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .scenario-result {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .scenario-box {
            padding: 16px;
            border-radius: 8px;
            text-align: center;
        }

        .scenario-box.current {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        .scenario-box.universal {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        .scenario-box-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .scenario-box.current .scenario-box-label { color: var(--red); }
        .scenario-box.universal .scenario-box-label { color: var(--green); }

        .scenario-box-amount {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .scenario-box.current .scenario-box-amount { color: var(--red); }
        .scenario-box.universal .scenario-box-amount { color: var(--green); }

        .scenario-box-items {
            font-size: 0.8rem;
            color: var(--text-light);
            text-align: left;
            margin-top: 8px;
        }

        .scenario-box-items li {
            margin-bottom: 4px;
        }

        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        /* Widget 6: Healthcare Tiers */
        .tiers-demo {
            background: var(--background);
            border-radius: 8px;
            padding: 20px;
        }

        .tiers-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .tier-card {
            background: var(--white);
            border-radius: 8px;
            padding: 16px;
            border-left: 4px solid var(--border);
            transition: all 0.3s;
        }

        .tier-card.basic {
            border-left-color: var(--green);
            background: rgba(16, 185, 129, 0.05);
        }

        .tier-card.plus {
            border-left-color: var(--primary);
        }

        .tier-card.premium {
            border-left-color: var(--purple);
        }

        .tier-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .tier-name {
            font-weight: 700;
            font-size: 1rem;
        }

        .tier-card.basic .tier-name { color: var(--green); }
        .tier-card.plus .tier-name { color: var(--primary); }
        .tier-card.premium .tier-name { color: var(--purple); }

        .tier-cost {
            font-size: 0.85rem;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: 600;
        }

        .tier-card.basic .tier-cost {
            background: rgba(16, 185, 129, 0.15);
            color: #047857;
        }

        .tier-card.plus .tier-cost {
            background: rgba(80, 135, 229, 0.15);
            color: var(--primary-dark);
        }

        .tier-card.premium .tier-cost {
            background: rgba(139, 92, 246, 0.15);
            color: #6d28d9;
        }

        .tier-items {
            list-style: none;
            font-size: 0.85rem;
            color: var(--text-light);
        }

        .tier-items li {
            padding: 4px 0;
            padding-left: 20px;
            position: relative;
        }

        .tier-items li::before {
            content: "✓";
            position: absolute;
            left: 0;
            color: var(--green);
        }

        .tier-card.plus .tier-items li::before,
        .tier-card.premium .tier-items li::before {
            content: "+";
            color: var(--primary);
        }

        .tier-note {
            margin-top: 16px;
            padding: 12px;
            background: rgba(80, 135, 229, 0.1);
            border-radius: 6px;
            font-size: 0.85rem;
            color: var(--text);
        }

        .tier-note strong {
            color: var(--primary);
        }

        /* Widget 7: Tax Dollars Flow */
        .tax-demo {
            background: var(--background);
            border-radius: 8px;
            padding: 20px;
        }

        .tax-flow {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .tax-row {
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--white);
            padding: 12px;
            border-radius: 8px;
        }

        .tax-icon {
            font-size: 1.5rem;
            width: 40px;
            text-align: center;
        }

        .tax-info {
            flex: 1;
        }

        .tax-label {
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--text);
        }

        .tax-sublabel {
            font-size: 0.75rem;
            color: var(--text-light);
        }

        .tax-amount {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--primary);
        }

        .tax-arrow {
            text-align: center;
            font-size: 1.5rem;
            color: var(--text-light);
        }

        .tax-leakage {
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(239, 68, 68, 0.1);
            padding: 12px;
            border-radius: 8px;
            border: 1px dashed rgba(239, 68, 68, 0.3);
        }

        .tax-leakage .tax-icon { color: var(--red); }
        .tax-leakage .tax-amount { color: var(--red); }

        .tax-total {
            background: rgba(80, 135, 229, 0.1);
            padding: 16px;
            border-radius: 8px;
            text-align: center;
            margin-top: 8px;
        }

        .tax-total-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-light);
            margin-bottom: 4px;
        }

        .tax-total-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .tax-total-note {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 4px;
        }

        /* Widget 8: Corporate Shuffle */
        .shuffle-demo {
            background: var(--background);
            border-radius: 8px;
            padding: 20px;
        }

        .shuffle-toggle {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }

        .shuffle-btn {
            flex: 1;
            padding: 10px 16px;
            border: 2px solid var(--border);
            background: var(--white);
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .shuffle-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .shuffle-flow {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .shuffle-step {
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--white);
            padding: 12px;
            border-radius: 8px;
            border-left: 3px solid var(--border);
        }

        .shuffle-step.profit {
            border-left-color: var(--red);
            background: rgba(239, 68, 68, 0.05);
        }

        .shuffle-step.worker {
            border-left-color: var(--orange);
            background: rgba(245, 158, 11, 0.05);
        }

        .shuffle-step-num {
            width: 24px;
            height: 24px;
            background: var(--border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--text-light);
        }

        .shuffle-step.profit .shuffle-step-num { background: rgba(239, 68, 68, 0.2); color: var(--red); }
        .shuffle-step.worker .shuffle-step-num { background: rgba(245, 158, 11, 0.2); color: #b45309; }

        .shuffle-step-text {
            flex: 1;
            font-size: 0.85rem;
            color: var(--text);
        }

        .shuffle-step-amount {
            font-weight: 700;
            font-size: 0.9rem;
        }

        .shuffle-step.profit .shuffle-step-amount { color: var(--red); }
        .shuffle-step.worker .shuffle-step-amount { color: var(--orange); }

        .shuffle-result {
            margin-top: 12px;
            padding: 16px;
            background: rgba(239, 68, 68, 0.1);
            border-radius: 8px;
            text-align: center;
        }

        .shuffle-result-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--red);
            margin-bottom: 4px;
        }

        .shuffle-result-value {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--red);
        }

        /* Widget 9: Basic Coverage Clarity */
        .coverage-demo {
            background: var(--background);
            border-radius: 8px;
            padding: 20px;
        }

        .coverage-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        @media (max-width: 600px) {
            .coverage-columns {
                grid-template-columns: 1fr;
            }
        }

        .coverage-column {
            background: var(--white);
            border-radius: 8px;
            padding: 16px;
        }

        .coverage-column.covered {
            border: 2px solid rgba(16, 185, 129, 0.3);
        }

        .coverage-column.optional {
            border: 2px solid rgba(139, 92, 246, 0.3);
        }

        .coverage-column-header {
            font-weight: 700;
            font-size: 0.9rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .coverage-column.covered .coverage-column-header { color: var(--green); }
        .coverage-column.optional .coverage-column-header { color: var(--purple); }

        .coverage-list {
            list-style: none;
            font-size: 0.85rem;
        }

        .coverage-list li {
            padding: 6px 0;
            padding-left: 22px;
            position: relative;
            color: var(--text);
            border-bottom: 1px solid var(--border);
        }

        .coverage-list li:last-child {
            border-bottom: none;
        }

        .coverage-column.covered .coverage-list li::before {
            content: "✓";
            position: absolute;
            left: 0;
            color: var(--green);
            font-weight: 700;
        }

        .coverage-column.optional .coverage-list li::before {
            content: "$";
            position: absolute;
            left: 0;
            color: var(--purple);
            font-weight: 700;
        }

        .coverage-note {
            grid-column: span 2;
            margin-top: 4px;
            padding: 12px;
            background: rgba(16, 185, 129, 0.1);
            border-radius: 6px;
            font-size: 0.85rem;
            color: var(--text);
        }

        @media (max-width: 600px) {
            .coverage-note {
                grid-column: span 1;
            }
        }

        .coverage-note strong {
            color: var(--green);
        }

        /* Widget 6: Interactive Tier Selection */
        .tier-card {
            cursor: pointer;
            position: relative;
        }

        .tier-card:hover {
            transform: translateX(4px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .tier-card.selected {
            box-shadow: 0 0 0 3px var(--primary);
        }

        .tier-card.selected::after {
            content: "✓ Selected";
            position: absolute;
            top: 12px;
            right: 12px;
            font-size: 0.7rem;
            background: var(--primary);
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
        }

        .tier-comparison {
            margin-top: 16px;
            padding: 16px;
            background: var(--white);
            border-radius: 8px;
            border: 2px solid var(--primary);
            display: none;
        }

        .tier-comparison.show {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .tier-comparison-header {
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 12px;
            font-size: 0.9rem;
        }

        .tier-comparison-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
            font-size: 0.85rem;
        }

        .tier-comparison-row:last-child {
            border-bottom: none;
        }

        .tier-comparison-label {
            color: var(--text-light);
        }

        .tier-comparison-value {
            font-weight: 600;
        }

        .tier-comparison-value.savings {
            color: var(--green);
        }

        /* Widget 7: Animated Tax Flow */
        .tax-row {
            transition: all 0.3s;
            cursor: pointer;
        }

        .tax-row:hover {
            transform: translateX(4px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .tax-row.highlighted {
            box-shadow: 0 0 0 2px var(--primary);
        }

        .tax-detail {
            display: none;
            background: var(--white);
            padding: 12px;
            border-radius: 6px;
            margin-top: 8px;
            font-size: 0.85rem;
            border-left: 3px solid var(--primary);
        }

        .tax-detail.show {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        .tax-toggle-view {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }

        .tax-view-btn {
            flex: 1;
            padding: 10px 16px;
            border: 2px solid var(--border);
            background: var(--white);
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .tax-view-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Widget 8: Step-by-step animation */
        .shuffle-step {
            opacity: 0;
            transform: translateX(-20px);
            transition: all 0.3s;
        }

        .shuffle-step.visible {
            opacity: 1;
            transform: translateX(0);
        }

        .shuffle-controls {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .shuffle-control-btn {
            flex: 1;
            padding: 10px 16px;
            border: 2px solid var(--border);
            background: var(--white);
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .shuffle-control-btn:hover {
            border-color: var(--primary);
        }

        .shuffle-control-btn.primary {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Widget 9: Interactive Coverage Explorer */
        .coverage-scenario-select {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .coverage-scenario-btn {
            padding: 8px 14px;
            border: 2px solid var(--border);
            background: var(--white);
            border-radius: 6px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .coverage-scenario-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .coverage-list li {
            cursor: pointer;
            transition: all 0.2s;
        }

        .coverage-list li:hover {
            background: rgba(0,0,0,0.03);
            padding-left: 26px;
        }

        .coverage-list li.expanded {
            background: rgba(80, 135, 229, 0.1);
        }

        .coverage-detail {
            display: none;
            font-size: 0.8rem;
            color: var(--text-light);
            padding: 8px 0 4px 0;
            font-style: italic;
        }

        .coverage-list li.expanded .coverage-detail {
            display: block;
        }

        .coverage-scenario-result {
            margin-top: 16px;
            padding: 16px;
            background: var(--white);
            border-radius: 8px;
            border: 2px solid var(--green);
            display: none;
        }

        .coverage-scenario-result.show {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        .coverage-scenario-header {
            font-weight: 700;
            color: var(--green);
            margin-bottom: 8px;
        }

        .coverage-scenario-text {
            font-size: 0.9rem;
            color: var(--text);
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">&larr; Back to Votecraft</a>

        <h1>Healthcare Widget Options</h1>
        <p class="subtitle">Interactive demos to help explain universal healthcare economics</p>

        <div class="options-grid">
            <!-- Option 1: Healthcare Cost by Income -->
            <div class="option-card full-width">
                <div class="option-header">
                    <span class="option-number">1</span>
                    <span class="option-title">"Healthcare Hits Different by Income"</span>
                </div>
                <p class="option-description">
                    Select your employment type and income to see how much of your earnings go to healthcare. The current system punishes gig workers and lower incomes. <em>Estimates based on KFF Employer Health Benefits Survey and Census Bureau data.</em>
                </p>
                <div class="cost-demo">
                    <h4>1. Your Income</h4>
                    <div class="income-selector" id="income-selector">
                        <button class="income-btn" data-income="0">
                            $0
                            <span class="income-pct">Unemployed</span>
                        </button>
                        <button class="income-btn" data-income="20000">
                            $10-30K
                            <span class="income-pct">21% of US</span>
                        </button>
                        <button class="income-btn" data-income="40000">
                            $30-50K
                            <span class="income-pct">18% of US</span>
                        </button>
                        <button class="income-btn active" data-income="75000">
                            $50-100K
                            <span class="income-pct">24% of US</span>
                        </button>
                        <button class="income-btn" data-income="175000">
                            $100-250K
                            <span class="income-pct">28% of US</span>
                        </button>
                        <button class="income-btn" data-income="350000">
                            $250-450K+
                            <span class="income-pct">9% of US</span>
                        </button>
                    </div>

                    <h4 style="margin-top: 16px;">2. Your Employment Type</h4>
                    <div class="income-selector" id="employment-selector">
                        <button class="income-btn" data-employment="minimum">
                            Min. Wage
                            <span class="income-label">Retail/Service</span>
                        </button>
                        <button class="income-btn" data-employment="gig">
                            Gig/Contract
                            <span class="income-label">1099 Worker</span>
                        </button>
                        <button class="income-btn" data-employment="parttime">
                            Part-Time
                            <span class="income-label">No Benefits</span>
                        </button>
                        <button class="income-btn active" data-employment="fulltime">
                            Full-Time
                            <span class="income-label">W-2 + Benefits</span>
                        </button>
                    </div>

                    <h4 style="margin-top: 16px;">3. Your State Type</h4>
                    <div class="state-selector">
                        <select id="state-select">
                            <option value="expansion">Medicaid Expansion State (41 states + DC)</option>
                            <option value="non-expansion">Non-Expansion State (TX, FL, GA, etc.)</option>
                        </select>
                    </div>

                    <div class="income-visual">
                        <div class="cost-breakdown-grid" id="cost-breakdown">
                            <div class="cost-breakdown-header">Annual Healthcare Costs</div>
                            <div class="cost-line hidden-cost" id="employer-row">
                                <span class="cost-line-label">Employer's Share <span class="hidden-tag">invisible to you</span></span>
                                <span class="cost-line-amount" id="cost-employer">$17,393/yr</span>
                            </div>
                            <div class="cost-line">
                                <span class="cost-line-label">Your Premium (paycheck deduction)</span>
                                <span class="cost-line-amount" id="cost-premium">$6,575/yr</span>
                            </div>
                            <div class="cost-line">
                                <span class="cost-line-label">Out-of-Pocket (deductibles, copays)</span>
                                <span class="cost-line-amount" id="cost-oop">$3,000/yr</span>
                            </div>
                            <div class="cost-line total">
                                <span class="cost-line-label">Total Healthcare Cost</span>
                                <span class="cost-line-amount" id="cost-total">$27,000/yr</span>
                            </div>
                        </div>

                        <div class="income-bar-label">
                            <span>Your Income: <strong id="income-amount">$75,000</strong></span>
                            <span>Total Healthcare: <strong id="healthcare-pct-label">36%</strong></span>
                        </div>
                        <div class="income-bar">
                            <div class="income-bar-fill">
                                <div class="income-bar-segment employer-share" id="bar-employer-share" style="width: 20%"></div>
                                <div class="income-bar-segment your-share" id="bar-your-share" style="width: 10%"></div>
                                <div class="income-bar-segment oop-share" id="bar-oop-share" style="width: 6%"></div>
                                <div class="income-bar-segment remaining" id="bar-remaining" style="width: 64%"></div>
                            </div>
                        </div>
                        <div class="bar-legend" id="bar-legend">
                            <span class="legend-item"><span class="legend-dot employer-share"></span> Employer's Share</span>
                            <span class="legend-item"><span class="legend-dot your-share"></span> Your Premium</span>
                            <span class="legend-item"><span class="legend-dot oop-share"></span> Out-of-Pocket</span>
                            <span class="legend-item"><span class="legend-dot remaining"></span> Remaining</span>
                        </div>
                        <div id="employment-note" class="employment-note" style="display: none;">
                            <!-- Filled dynamically based on employment type -->
                        </div>
                    </div>

                    <div class="income-comparison">
                        <div class="income-compare-box current">
                            <div class="income-compare-label">Current System</div>
                            <div class="income-compare-pct" id="current-pct">36%</div>
                            <div class="income-compare-detail" id="current-detail">of income to healthcare</div>
                        </div>
                        <div class="income-compare-box universal">
                            <div class="income-compare-label">Universal System</div>
                            <div class="income-compare-pct" id="universal-pct">8%</div>
                            <div class="income-compare-detail" id="universal-detail">income-based tax</div>
                        </div>
                    </div>

                    <div class="income-impact regressive" id="income-impact">
                        <strong>The problem:</strong> A family earning $30K pays 90% of their income to healthcare (true total cost), while a family earning $200K pays only 13.5%. Same coverage, wildly unfair burden.
                    </div>
                    <div class="inline-source" style="margin-top: 12px; text-align: center;">
                        Sources: <a href="https://www.kff.org/health-costs/report/employer-health-benefits-annual-survey/" target="_blank">KFF 2024</a> ·
                        <a href="https://www.bls.gov/cex/" target="_blank">BLS Consumer Expenditure</a>
                    </div>
                </div>
            </div>

            <!-- Option 2: Follow the Dollar -->
            <div class="option-card">
                <div class="option-header">
                    <span class="option-number">2</span>
                    <span class="option-title">"Follow the Dollar"</span>
                </div>
                <p class="option-description">
                    Animated visualization showing where healthcare dollars actually go. Toggle between current system and simplified universal system to see the difference.
                </p>
                <div class="dollar-demo">
                    <div class="dollar-toggle">
                        <button class="dollar-toggle-btn active" data-system="current">Current System</button>
                        <button class="dollar-toggle-btn" data-system="universal">Universal System</button>
                    </div>
                    <div class="dollar-flow" id="dollar-flow">
                        <div class="dollar-bar">
                            <span class="dollar-bar-label">Insurance Admin</span>
                            <div class="dollar-bar-track">
                                <div class="dollar-bar-fill admin" style="width: 18%">18%</div>
                            </div>
                        </div>
                        <div class="dollar-bar">
                            <span class="dollar-bar-label">Hospital Billing</span>
                            <div class="dollar-bar-track">
                                <div class="dollar-bar-fill billing" style="width: 15%">15%</div>
                            </div>
                        </div>
                        <div class="dollar-bar">
                            <span class="dollar-bar-label">Pharma Marketing</span>
                            <div class="dollar-bar-track">
                                <div class="dollar-bar-fill pharma" style="width: 12%">12%</div>
                            </div>
                        </div>
                        <div class="dollar-bar">
                            <span class="dollar-bar-label">Actual Care</span>
                            <div class="dollar-bar-track">
                                <div class="dollar-bar-fill care" style="width: 55%">55%</div>
                            </div>
                        </div>
                    </div>
                    <div class="inline-source" style="margin-top: 12px; text-align: center;">
                        Sources: <a href="https://www.cms.gov/research-statistics-data-and-systems/statistics-trends-and-reports/nationalhealthexpenddata" target="_blank">CMS National Health Expenditure</a> ·
                        <a href="https://jamanetwork.com/journals/jama/article-abstract/2785479" target="_blank">JAMA Admin Costs Study</a>
                    </div>
                </div>
            </div>

            <!-- Option 3: Country Comparison -->
            <div class="option-card">
                <div class="option-header">
                    <span class="option-number">3</span>
                    <span class="option-title">"Country Comparison"</span>
                </div>
                <p class="option-description">
                    Compare what you'd pay and receive in different countries. Shows taxes, coverage, and health outcomes side by side.
                </p>
                <div class="country-demo">
                    <div class="country-select">
                        <button class="country-btn active">🇺🇸 USA</button>
                        <button class="country-btn">🇨🇦 Canada</button>
                        <button class="country-btn">🇬🇧 UK</button>
                        <button class="country-btn">🇩🇪 Germany</button>
                    </div>
                    <div class="country-comparison">
                        <div class="country-stat">
                            <div class="country-stat-label">Cost per Person</div>
                            <div class="country-stat-value">$12,530</div>
                            <div class="country-stat-note">Highest in world</div>
                        </div>
                        <div class="country-stat">
                            <div class="country-stat-label">Life Expectancy</div>
                            <div class="country-stat-value">76.4 yrs</div>
                            <div class="country-stat-note">Rank: #46</div>
                        </div>
                        <div class="country-stat">
                            <div class="country-stat-label">Uninsured</div>
                            <div class="country-stat-value">8.6%</div>
                            <div class="country-stat-note">~28 million people</div>
                        </div>
                        <div class="country-stat">
                            <div class="country-stat-label">Medical Bankruptcy</div>
                            <div class="country-stat-value">66.5%</div>
                            <div class="country-stat-note">of all bankruptcies</div>
                        </div>
                    </div>
                    <div class="inline-source" style="margin-top: 12px; text-align: center;">
                        Sources: <a href="https://www.healthsystemtracker.org/chart-collection/health-spending-u-s-compare-countries/" target="_blank">Peterson-KFF Tracker</a> ·
                        <a href="https://data.oecd.org/healthstat/life-expectancy-at-birth.htm" target="_blank">OECD Health Data</a> ·
                        <a href="https://www.census.gov/library/publications/2023/demo/p60-278.html" target="_blank">U.S. Census Bureau</a>
                    </div>
                </div>
            </div>

            <!-- Option 4: Risk Pool -->
            <div class="option-card">
                <div class="option-header">
                    <span class="option-number">4</span>
                    <span class="option-title">"Risk Pool Simulator"</span>
                </div>
                <p class="option-description">
                    Interactive demo showing how insurance works - why larger pools are more stable and why "everyone in" makes costs predictable.
                </p>
                <div class="pool-demo">
                    <div class="pool-controls">
                        <button class="pool-btn active" data-pool="small">Small Company (10)</button>
                        <button class="pool-btn" data-pool="medium">Large Company (50)</button>
                        <button class="pool-btn" data-pool="large">Universal (Everyone)</button>
                    </div>
                    <div class="pool-controls">
                        <button class="pool-btn danger" id="add-sick-btn">+ Add Sick Person</button>
                        <button class="pool-btn" id="simulate-btn">Simulate Year</button>
                        <button class="pool-btn" id="reset-pool-btn">Reset</button>
                    </div>
                    <div class="pool-visual">
                        <div class="pool" style="flex: 1;">
                            <div class="pool-label" id="pool-title">Small Company Pool</div>
                            <div class="pool-people" id="pool-people">
                                <!-- Generated by JS -->
                            </div>
                            <div class="pool-stats" id="pool-stats">
                                <span>10 people</span>
                                <span>20% sick</span>
                            </div>
                            <div class="pool-cost">
                                <div class="pool-cost-label">Monthly Premium Per Person</div>
                                <div class="pool-cost-value high" id="pool-cost">$847</div>
                                <div class="inline-source">(<a href="https://www.kff.org/health-costs/report/employer-health-benefits-annual-survey/" target="_blank">KFF Employer Survey 2024</a>)</div>
                            </div>
                        </div>
                    </div>
                    <div class="pool-event" id="pool-event"></div>
                    <div class="pool-insight" id="pool-insight">
                        <strong>Try it:</strong> Click "Add Sick Person" to see how one person with high costs affects everyone's premium in a small pool. Then switch to a larger pool to see the difference.
                    </div>
                    <div class="inline-source" style="margin-top: 12px; text-align: center;">
                        Sources: <a href="https://www.kff.org/health-costs/report/employer-health-benefits-annual-survey/" target="_blank">KFF Employer Survey</a> ·
                        <a href="https://www.healthsystemtracker.org/chart-collection/health-spending-u-s-compare-countries/" target="_blank">Peterson-KFF Tracker</a> ·
                        <a href="https://www.cms.gov/cciio/resources/data-resources/mlr" target="_blank">CMS MLR Data</a>
                    </div>
                </div>
            </div>

            <!-- Option 5: Scenario Builder -->
            <div class="option-card" style="grid-column: span 2;">
                <div class="option-header">
                    <span class="option-number">5</span>
                    <span class="option-title">"Your Healthcare Story" (Bonus Option)</span>
                </div>
                <p class="option-description">
                    Users select real-life scenarios and see the cost difference. Makes abstract policy concrete and personal.
                </p>
                <div class="scenario-demo">
                    <div class="scenario-select">
                        <button class="scenario-btn active">🤰 Have a Baby</button>
                        <button class="scenario-btn">🦴 Break a Leg</button>
                        <button class="scenario-btn">🎗️ Cancer Treatment</button>
                        <button class="scenario-btn">💊 Routine Checkup</button>
                        <button class="scenario-btn">🏥 ER Visit</button>
                    </div>
                    <div class="scenario-result">
                        <div class="scenario-box current">
                            <div class="scenario-box-label">Current System</div>
                            <div class="scenario-box-amount">$4,500</div>
                            <ul class="scenario-box-items">
                                <li>$2,500 deductible</li>
                                <li>$1,200 copays (visits, labs)</li>
                                <li>$800 "surprise" bills</li>
                                <li>+ Monthly premiums</li>
                            </ul>
                        </div>
                        <div class="scenario-box universal">
                            <div class="scenario-box-label">Universal System</div>
                            <div class="scenario-box-amount">$0</div>
                            <ul class="scenario-box-items">
                                <li>All prenatal care covered</li>
                                <li>Hospital stay covered</li>
                                <li>No surprise bills</li>
                                <li>No additional cost</li>
                            </ul>
                        </div>
                    </div>
                    <div class="inline-source" style="margin-top: 12px; text-align: center;">
                        Sources: <a href="https://www.healthcostinstitute.org/" target="_blank">Health Cost Institute</a> ·
                        <a href="https://www.kff.org/health-costs/issue-brief/an-examination-of-surprise-medical-bills/" target="_blank">KFF Surprise Bills Study</a> ·
                        <a href="https://www.ajmc.com/view/a-comparison-of-hospital-administrative-costs" target="_blank">AJMC Hospital Costs</a>
                    </div>
                </div>
            </div>

            <!-- Widget 6: Healthcare Tiers -->
            <div class="option-card">
                <div class="option-header">
                    <span class="option-number">6</span>
                    <span class="option-title">"Universal = Floor, Not Ceiling"</span>
                </div>
                <p class="option-description">
                    Click each tier to see how it compares to what you pay now. Universal is the floor - you can always add more!
                </p>
                <div class="tiers-demo">
                    <div class="tiers-container" id="tiers-container">
                        <div class="tier-card basic" data-tier="basic">
                            <div class="tier-header">
                                <span class="tier-name">Universal Basic (Everyone Gets This)</span>
                                <span class="tier-cost">Tax-funded</span>
                            </div>
                            <ul class="tier-items">
                                <li>Primary care & checkups</li>
                                <li>Preventive screenings</li>
                                <li>Emergency room visits</li>
                                <li>Essential prescriptions</li>
                                <li>Mental health services</li>
                                <li>Standard surgeries</li>
                            </ul>
                        </div>
                        <div class="tier-card plus" data-tier="plus">
                            <div class="tier-header">
                                <span class="tier-name">Plus Tier (Optional)</span>
                                <span class="tier-cost">~$150/mo</span>
                            </div>
                            <ul class="tier-items">
                                <li>Private rooms in hospitals</li>
                                <li>Faster specialist appointments</li>
                                <li>Expanded dental & vision</li>
                                <li>Alternative therapies</li>
                            </ul>
                        </div>
                        <div class="tier-card premium" data-tier="premium">
                            <div class="tier-header">
                                <span class="tier-name">Premium Tier (Optional)</span>
                                <span class="tier-cost">~$400/mo</span>
                            </div>
                            <ul class="tier-items">
                                <li>Concierge medicine / VIP access</li>
                                <li>Experimental treatments</li>
                                <li>Luxury facility upgrades</li>
                                <li>International coverage</li>
                            </ul>
                        </div>
                    </div>
                    <div class="tier-comparison" id="tier-comparison">
                        <div class="tier-comparison-header" id="tier-comparison-header">Basic Tier vs. Current System</div>
                        <div class="tier-comparison-row">
                            <span class="tier-comparison-label">Your current annual cost:</span>
                            <span class="tier-comparison-value">$9,575</span>
                        </div>
                        <div class="tier-comparison-row">
                            <span class="tier-comparison-label">This tier annual cost:</span>
                            <span class="tier-comparison-value" id="tier-cost-value">$0 (tax-funded)</span>
                        </div>
                        <div class="tier-comparison-row">
                            <span class="tier-comparison-label">Your savings:</span>
                            <span class="tier-comparison-value savings" id="tier-savings">$9,575/year</span>
                        </div>
                        <div class="tier-comparison-row">
                            <span class="tier-comparison-label">Coverage level:</span>
                            <span class="tier-comparison-value" id="tier-coverage">Same or better for 95% of needs</span>
                        </div>
                    </div>
                    <div class="tier-note">
                        <strong>Click a tier above</strong> to compare costs. In countries with universal healthcare, about 10-15% buy supplemental coverage. The difference? Nobody goes bankrupt for basic care.
                    </div>
                    <div class="inline-source" style="margin-top: 12px; text-align: center;">
                        Sources: <a href="https://www.commonwealthfund.org/international-health-policy-center" target="_blank">Commonwealth Fund International Comparisons</a> ·
                        <a href="https://www.oecd.org/health/" target="_blank">OECD Health Statistics</a>
                    </div>
                </div>
            </div>

            <!-- Widget 7: Where Your Tax Dollars Already Go -->
            <div class="option-card">
                <div class="option-header">
                    <span class="option-number">7</span>
                    <span class="option-title">"Where Your Tax Dollars Already Go"</span>
                </div>
                <p class="option-description">
                    Click each program to learn more. Toggle views to see where the money actually ends up.
                </p>
                <div class="tax-demo">
                    <div class="tax-toggle-view">
                        <button class="tax-view-btn active" data-view="programs">By Program</button>
                        <button class="tax-view-btn" data-view="destination">Where It Goes</button>
                        <button class="tax-view-btn" data-view="perperson">Per Person</button>
                    </div>
                    <div class="tax-flow" id="tax-flow">
                        <div class="tax-row" data-program="medicare">
                            <span class="tax-icon">🏥</span>
                            <div class="tax-info">
                                <div class="tax-label">Medicare</div>
                                <div class="tax-sublabel">65+ and disabled Americans</div>
                            </div>
                            <span class="tax-amount">$900B</span>
                        </div>
                        <div class="tax-detail" id="detail-medicare">
                            <strong>Did you know?</strong> About 50% of Medicare beneficiaries are now in private Medicare Advantage plans. These insurers take 15-20% for admin/profit before paying for care. Traditional Medicare admin costs are only 2%.
                        </div>
                        <div class="tax-row" data-program="medicaid">
                            <span class="tax-icon">👨‍👩‍👧‍👦</span>
                            <div class="tax-info">
                                <div class="tax-label">Medicaid & CHIP</div>
                                <div class="tax-sublabel">Low-income families & children</div>
                            </div>
                            <span class="tax-amount">$800B</span>
                        </div>
                        <div class="tax-detail" id="detail-medicaid">
                            <strong>The managed care problem:</strong> Most states contract with private insurers to "manage" Medicaid. These companies keep 10-15% for themselves. Some have been caught denying care to boost profits.
                        </div>
                        <div class="tax-row" data-program="va">
                            <span class="tax-icon">🎖️</span>
                            <div class="tax-info">
                                <div class="tax-label">VA Healthcare</div>
                                <div class="tax-sublabel">Veterans' medical care</div>
                            </div>
                            <span class="tax-amount">$115B</span>
                        </div>
                        <div class="tax-detail" id="detail-va">
                            <strong>True single-payer:</strong> The VA is the closest thing America has to government-run healthcare. It consistently scores higher in patient satisfaction than private healthcare, with lower costs per patient.
                        </div>
                        <div class="tax-row" data-program="subsidies">
                            <span class="tax-icon">💼</span>
                            <div class="tax-info">
                                <div class="tax-label">Employer Tax Subsidies</div>
                                <div class="tax-sublabel">Tax breaks for employer insurance</div>
                            </div>
                            <span class="tax-amount">$300B</span>
                        </div>
                        <div class="tax-detail" id="detail-subsidies">
                            <strong>Hidden subsidy:</strong> When employers pay for your insurance, that money isn't taxed. This costs the government $300B/year - a subsidy that benefits higher earners more (they're in higher tax brackets).
                        </div>
                        <div class="tax-arrow">↓</div>
                        <div class="tax-leakage" data-program="leakage">
                            <span class="tax-icon">💸</span>
                            <div class="tax-info">
                                <div class="tax-label">Private Insurer "Cut"</div>
                                <div class="tax-sublabel">Admin, profits, marketing</div>
                            </div>
                            <span class="tax-amount">~$200B</span>
                        </div>
                        <div class="tax-detail" id="detail-leakage">
                            <strong>The skim:</strong> Private insurers managing Medicare Advantage and Medicaid keep $200B+ for admin, executive pay, marketing, and shareholder profits. This is money that could pay for actual healthcare.
                        </div>
                    </div>
                    <div class="tax-total">
                        <div class="tax-total-label">Total Government Healthcare Spending</div>
                        <div class="tax-total-value" id="tax-total-value">$2.1 Trillion/year</div>
                        <div class="tax-total-note" id="tax-total-note">That's ~$6,400 per person - already more than Canada spends TOTAL ($5,370)</div>
                    </div>
                    <div class="pool-insight" id="tax-insight" style="margin-top: 12px;">
                        <strong>Click any program above</strong> to learn how the money actually flows. We're already paying enough to cover everyone - it's just going to the wrong places.
                    </div>
                    <div class="inline-source" style="margin-top: 12px; text-align: center;">
                        Sources: <a href="https://www.cms.gov/research-statistics-data-and-systems/statistics-trends-and-reports/nationalhealthexpenddata" target="_blank">CMS National Health Expenditure 2023</a> ·
                        <a href="https://www.cbpp.org/research/health/medicaid-and-chip" target="_blank">CBPP Medicaid Analysis</a> ·
                        <a href="https://www.taxpolicycenter.org/briefing-book/how-does-tax-exclusion-employer-sponsored-health-insurance-work" target="_blank">Tax Policy Center</a>
                    </div>
                </div>
            </div>

            <!-- Widget 8: The Corporate Healthcare Shuffle -->
            <div class="option-card">
                <div class="option-header">
                    <span class="option-number">8</span>
                    <span class="option-title">"The Corporate Healthcare Shuffle"</span>
                </div>
                <p class="option-description">
                    Click "Next Step" to follow the money. See how corporations extract profit at every stage of your healthcare journey.
                </p>
                <div class="shuffle-demo">
                    <div class="shuffle-toggle">
                        <button class="shuffle-btn active" data-view="insurance">Insurance Game</button>
                        <button class="shuffle-btn" data-view="pharma">Pharma Game</button>
                        <button class="shuffle-btn" data-view="hospital">Hospital Game</button>
                    </div>
                    <div class="shuffle-flow" id="shuffle-flow">
                        <!-- Populated by JS -->
                    </div>
                    <div class="shuffle-controls">
                        <button class="shuffle-control-btn" id="shuffle-prev">← Previous</button>
                        <button class="shuffle-control-btn primary" id="shuffle-next">Next Step →</button>
                        <button class="shuffle-control-btn" id="shuffle-show-all">Show All</button>
                    </div>
                    <div class="shuffle-result" id="shuffle-result" style="display: none;">
                        <div class="shuffle-result-label">Who Wins?</div>
                        <div class="shuffle-result-value" id="shuffle-winner">Insurance shareholders</div>
                    </div>
                    <div class="pool-insight" id="shuffle-insight" style="margin-top: 12px;">
                        <strong>Follow the money:</strong> Click "Next Step" to see how your healthcare dollar gets divided up before it ever pays for care.
                    </div>
                    <div class="inline-source" style="margin-top: 12px; text-align: center;">
                        Sources: <a href="https://www.ama-assn.org/about/research/competition-health-insurance" target="_blank">AMA Insurance Competition Report</a> ·
                        <a href="https://www.drugchannels.net/" target="_blank">Drug Channels Analysis</a> ·
                        <a href="https://www.healthaffairs.org/topic/1702" target="_blank">Health Affairs Hospital Studies</a>
                    </div>
                </div>
            </div>

            <!-- Widget 9: What Basic Coverage Actually Means -->
            <div class="option-card">
                <div class="option-header">
                    <span class="option-number">9</span>
                    <span class="option-title">"What 'Basic' Actually Covers"</span>
                </div>
                <p class="option-description">
                    Pick a life situation to see what's covered. Click any item to learn more details.
                </p>
                <div class="coverage-demo">
                    <div class="coverage-scenario-select">
                        <button class="coverage-scenario-btn active" data-scenario="general">General</button>
                        <button class="coverage-scenario-btn" data-scenario="pregnancy">Pregnancy</button>
                        <button class="coverage-scenario-btn" data-scenario="chronic">Chronic Illness</button>
                        <button class="coverage-scenario-btn" data-scenario="elderly">Senior Care</button>
                        <button class="coverage-scenario-btn" data-scenario="accident">Accident</button>
                    </div>
                    <div class="coverage-columns" id="coverage-columns">
                        <div class="coverage-column covered">
                            <div class="coverage-column-header">
                                <span>Covered (No Extra Cost)</span>
                            </div>
                            <ul class="coverage-list" id="covered-list">
                                <li data-item="checkups">Annual checkups & screenings
                                    <div class="coverage-detail">Includes physical exams, blood pressure, cholesterol, diabetes screening, cancer screenings (mammograms, colonoscopies). All at $0 cost.</div>
                                </li>
                                <li data-item="vaccines">All vaccinations
                                    <div class="coverage-detail">Flu shots, COVID, tetanus, shingles, pneumonia - all vaccines recommended by CDC. No copay.</div>
                                </li>
                                <li data-item="labs">Lab work & diagnostics
                                    <div class="coverage-detail">Blood tests, X-rays, MRIs, CT scans when medically necessary. No separate billing.</div>
                                </li>
                                <li data-item="rx">Generic & essential prescriptions
                                    <div class="coverage-detail">Insulin, blood pressure meds, antidepressants, antibiotics - all at low or no cost. Brand-name only if no generic exists.</div>
                                </li>
                                <li data-item="er">Emergency room visits
                                    <div class="coverage-detail">No bills, no "surprise" charges from out-of-network doctors. Go when you need to without financial fear.</div>
                                </li>
                                <li data-item="hospital">Hospital stays
                                    <div class="coverage-detail">Fully covered. No $2,000/night room charges. No separate billing for every doctor who walks in.</div>
                                </li>
                                <li data-item="surgery">Surgeries (medically necessary)
                                    <div class="coverage-detail">Appendectomy, hip replacement, heart surgery - covered when needed. No prior authorization battles.</div>
                                </li>
                                <li data-item="mental">Mental health therapy
                                    <div class="coverage-detail">Therapy sessions, psychiatry, addiction treatment. Mental health treated like physical health.</div>
                                </li>
                                <li data-item="maternity">Maternity & newborn care
                                    <div class="coverage-detail">All prenatal visits, delivery, postpartum care, newborn care. Currently costs $4,500+ out of pocket.</div>
                                </li>
                                <li data-item="pt">Physical therapy
                                    <div class="coverage-detail">Rehab after surgery, injury recovery, chronic pain management. No session limits.</div>
                                </li>
                                <li data-item="chronic">Chronic disease management
                                    <div class="coverage-detail">Diabetes care, asthma, heart disease, arthritis - ongoing care without ongoing costs.</div>
                                </li>
                                <li data-item="cancer">Cancer treatment (standard)
                                    <div class="coverage-detail">Chemo, radiation, surgery - proven treatments fully covered. No $12,000 out-of-pocket maximums.</div>
                                </li>
                            </ul>
                        </div>
                        <div class="coverage-column optional">
                            <div class="coverage-column-header">
                                <span>Optional (Pay Extra)</span>
                            </div>
                            <ul class="coverage-list" id="optional-list">
                                <li data-item="cosmetic">Cosmetic surgery
                                    <div class="coverage-detail">Nose jobs, facelifts, liposuction - elective appearance changes. Reconstructive surgery after injury IS covered.</div>
                                </li>
                                <li data-item="experimental">Experimental treatments
                                    <div class="coverage-detail">Unproven therapies, clinical trials. Once proven effective, they become covered.</div>
                                </li>
                                <li data-item="brand">Brand-name drugs (when generic exists)
                                    <div class="coverage-detail">Want Advil instead of ibuprofen? Pay the difference. Same medicine, different label.</div>
                                </li>
                                <li data-item="private-room">Private hospital rooms
                                    <div class="coverage-detail">Standard is semi-private. Want a suite? Upgrade is available for a fee.</div>
                                </li>
                                <li data-item="elective">Elective procedures
                                    <div class="coverage-detail">Procedures that aren't medically necessary but you want anyway.</div>
                                </li>
                                <li data-item="concierge">Concierge/VIP services
                                    <div class="coverage-detail">24/7 doctor access, same-day appointments, boutique care. Luxury healthcare.</div>
                                </li>
                                <li data-item="fertility">Fertility treatments (varies)
                                    <div class="coverage-detail">IVF, egg freezing - coverage varies by country. Many do cover basic fertility care.</div>
                                </li>
                                <li data-item="lasik">Vision correction surgery
                                    <div class="coverage-detail">LASIK, PRK - elective vision correction. Basic glasses/contacts often ARE covered.</div>
                                </li>
                                <li data-item="luxury-rehab">Luxury rehab facilities
                                    <div class="coverage-detail">Beach resort rehab vs. standard facility. Treatment covered, luxury amenities aren't.</div>
                                </li>
                                <li data-item="alt-med">Alternative medicine (unproven)
                                    <div class="coverage-detail">Homeopathy, unproven supplements. Acupuncture and chiropractic often ARE covered.</div>
                                </li>
                                <li data-item="travel">International travel coverage
                                    <div class="coverage-detail">Care abroad. Within the country, you're covered everywhere.</div>
                                </li>
                                <li data-item="fast-track">Faster appointment times
                                    <div class="coverage-detail">Skip the line? Pay for it. Standard wait times are reasonable in well-funded systems.</div>
                                </li>
                            </ul>
                        </div>
                        <div class="coverage-scenario-result" id="coverage-result">
                            <div class="coverage-scenario-header" id="coverage-result-header">For Your Situation</div>
                            <div class="coverage-scenario-text" id="coverage-result-text">Select a life scenario above to see specific coverage details.</div>
                        </div>
                        <div class="coverage-note">
                            <strong>Click any item</strong> to see details. "Basic" covers everything most people ever need. Currently, 28 million Americans can't even get checkups.
                        </div>
                    </div>
                    <div class="inline-source" style="margin-top: 12px; text-align: center;">
                        Sources: <a href="https://www.cms.gov/CCIIO/Resources/Files/essential-health-benefits" target="_blank">CMS Essential Health Benefits</a> ·
                        <a href="https://www.commonwealthfund.org/publications/issue-briefs/2023/jan/us-health-care-global-perspective-2022" target="_blank">Commonwealth Fund Global Comparison</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Option 1: Income & Employment-Based Healthcare Cost
        const employmentBtns = document.querySelectorAll('#employment-selector .income-btn');
        const incomeBtns = document.querySelectorAll('#income-selector .income-btn');
        const incomeAmount = document.getElementById('income-amount');
        const barYourShare = document.getElementById('bar-your-share');
        const barEmployerShare = document.getElementById('bar-employer-share');
        const barOopShare = document.getElementById('bar-oop-share');
        const barRemaining = document.getElementById('bar-remaining');
        const barLegend = document.getElementById('bar-legend');
        const currentPct = document.getElementById('current-pct');
        const currentDetail = document.getElementById('current-detail');
        const universalPct = document.getElementById('universal-pct');
        const universalDetail = document.getElementById('universal-detail');
        const incomeImpact = document.getElementById('income-impact');
        const employmentNote = document.getElementById('employment-note');
        const costPremium = document.getElementById('cost-premium');
        const costEmployer = document.getElementById('cost-employer');
        const costOop = document.getElementById('cost-oop');
        const costTotal = document.getElementById('cost-total');
        const employerRow = document.getElementById('employer-row');
        const healthcarePctLabel = document.getElementById('healthcare-pct-label');
        const stateSelect = document.getElementById('state-select');

        // Current state
        let currentEmployment = 'fulltime';
        let currentIncome = 75000;
        let currentState = 'expansion';

        // Employment type data - how costs differ by employment
        const employmentData = {
            fulltime: {
                label: 'Full-Time W-2',
                employerPays: 17393,    // Employer contribution (hidden from worker)
                employeePays: 6575,     // Employee premium share
                outOfPocket: 3000,      // Deductibles, copays, etc.
                totalCost: 27000,       // True total cost
                legendText: 'Healthcare (your premium + employer\'s hidden share + out-of-pocket)',
                note: null
            },
            parttime: {
                label: 'Part-Time (No Benefits)',
                employerPays: 0,        // No employer contribution
                employeePays: 15000,    // ACA marketplace plan (unsubsidized)
                outOfPocket: 5000,      // Higher deductibles on ACA bronze/silver
                totalCost: 20000,       // What you actually pay
                legendText: 'Healthcare (ACA premium + out-of-pocket - NO employer help)',
                note: '<strong>No employer help:</strong> Part-time workers must buy their own insurance on the ACA marketplace. No employer contribution means YOU pay the full cost.'
            },
            gig: {
                label: 'Gig/Contract (1099)',
                employerPays: 0,        // No employer contribution
                employeePays: 15000,    // ACA marketplace plan
                outOfPocket: 5000,      // Higher deductibles
                totalCost: 20000,       // What you actually pay
                legendText: 'Healthcare (ACA premium + out-of-pocket - NO employer help)',
                note: '<strong>The gig economy trap:</strong> As a 1099 contractor, you\'re "your own boss" but also your own HR department. No employer contribution, no group rates, no pre-tax benefits.'
            },
            minimum: {
                label: 'Minimum Wage (Retail/Service)',
                employerPays: 0,        // Many don't offer or workers can't afford
                employeePays: 12000,    // Subsidized ACA plan (lower income = more subsidy)
                outOfPocket: 4000,      // Still significant
                totalCost: 16000,       // With ACA subsidies
                legendText: 'Healthcare (subsidized ACA premium + out-of-pocket)',
                note: '<strong>The subsidy cliff:</strong> ACA subsidies help, but many minimum wage workers still can\'t afford coverage. In non-expansion states, they may fall in the "coverage gap" - too poor for ACA subsidies, but not eligible for Medicaid.'
            }
        };

        // Income labels
        const incomeLabels = {
            0: '$0 (Unemployed)',
            20000: '$10-30K (avg $20K)',
            40000: '$30-50K (avg $40K)',
            75000: '$50-100K (avg $75K)',
            175000: '$100-250K (avg $175K)',
            350000: '$250-450K+ (avg $350K)'
        };

        // Federal Poverty Level for 2024 (single person: ~$15,060, family of 4: ~$31,200)
        // Medicaid expansion covers up to 138% FPL (~$20,800 for single, ~$43,000 for family of 4)
        // We'll use $20K as the bracket that qualifies for Medicaid in expansion states

        // Get adjusted costs based on state Medicaid status
        function getAdjustedCosts(employment, income, stateType) {
            const base = employmentData[employment];

            // $0 income = unemployed, always check for Medicaid regardless of employment setting
            // For other low incomes, check if non-fulltime (since full-time workers have employer coverage)
            const medicaidEligible = income === 0 || (income <= 20000 && employment !== 'fulltime');

            if (stateType === 'expansion' && medicaidEligible) {
                // Medicaid covers nearly everything
                return {
                    employerPays: 0,
                    employeePays: 0,
                    outOfPocket: 500,       // Minimal copays for some services
                    totalCost: 500,
                    isMedicaid: true,
                    note: income === 0
                        ? '<strong>Medicaid coverage:</strong> With no income, you qualify for Medicaid in expansion states. Coverage is nearly free - just minimal copays for some services.'
                        : '<strong>Medicaid coverage:</strong> In expansion states, adults earning up to 138% of the federal poverty level ($20,783/year for an individual) qualify for Medicaid. Coverage is nearly free - just minimal copays for some services.'
                };
            } else if (stateType === 'non-expansion' && medicaidEligible) {
                // The coverage gap - too poor for ACA subsidies, don't qualify for Medicaid
                return {
                    employerPays: 0,
                    employeePays: 0,        // Can't afford it / not eligible
                    outOfPocket: 8000,      // Emergency room visits, etc.
                    totalCost: 8000,
                    isCoverageGap: true,
                    note: income === 0
                        ? '<strong>THE COVERAGE GAP:</strong> Even with $0 income, you may not qualify for Medicaid in non-expansion states (TX, FL, GA, WI, etc.). Childless adults often have no options - forced to rely on emergency rooms or go without care entirely.'
                        : '<strong>THE COVERAGE GAP:</strong> In non-expansion states (TX, FL, GA, WI, etc.), adults without children often can\'t get Medicaid regardless of income. You\'re too poor for ACA subsidies but don\'t qualify for Medicaid. Result: uninsured, relying on emergency rooms.'
                };
            }

            // For higher incomes or full-time workers, return base data
            return {
                employerPays: base.employerPays,
                employeePays: base.employeePays,
                outOfPocket: base.outOfPocket,
                totalCost: base.totalCost,
                isMedicaid: false,
                isCoverageGap: false,
                note: base.note
            };
        }

        function getInsight(income, employment, adjustedCosts) {
            // Handle $0 income case
            if (income === 0) {
                if (adjustedCosts.isMedicaid) {
                    return '<strong>Medicaid safety net:</strong> With no income, you qualify for Medicaid in expansion states - comprehensive coverage with minimal costs.';
                } else if (adjustedCosts.isCoverageGap) {
                    return '<strong>No income, no coverage:</strong> In non-expansion states, having zero income doesn\'t guarantee healthcare. You may fall into the coverage gap with no affordable options.';
                }
                return '<strong>No income situation:</strong> Without income, healthcare costs represent an infinite burden. This is why safety net programs exist.';
            }

            const pct = Math.round((adjustedCosts.totalCost / income) * 100);

            // Check for Medicaid or coverage gap situations first
            if (adjustedCosts.isMedicaid) {
                return '<strong>Medicaid safety net:</strong> In expansion states, low-income workers qualify for Medicaid - nearly free comprehensive coverage. This is what the healthcare system could look like for everyone.';
            }
            if (adjustedCosts.isCoverageGap) {
                return '<strong>The coverage gap crisis:</strong> In non-expansion states, ~2.2 million Americans are trapped - earning too little for ACA subsidies, but not qualifying for Medicaid. Many go uninsured and rely on emergency rooms.';
            }

            if (employment === 'fulltime') {
                if (income <= 30000) {
                    return '<strong>Crushing burden:</strong> For the 21% of Americans in this bracket, even with employer benefits, healthcare\'s TRUE cost ($27K) could be over 100% of income. This hidden cost suppresses wages.';
                } else if (income <= 100000) {
                    return '<strong>The middle squeeze:</strong> For the 42% of Americans in this bracket, healthcare takes ' + pct + '% of income when you count the employer\'s "hidden" contribution. That money could be higher wages.';
                } else if (income <= 250000) {
                    return '<strong>Getting easier:</strong> For the 28% in this bracket, healthcare is ' + pct + '% of income - more manageable, but you get the same coverage as someone paying 100%+.';
                } else {
                    return '<strong>The unfairness:</strong> For the top 9%, healthcare is just ' + pct + '% of income. Same insurance, same coverage, but dramatically lower burden than lower-income families.';
                }
            } else if (employment === 'parttime' || employment === 'gig') {
                if (income <= 30000) {
                    return '<strong>Impossible choice:</strong> At this income with no employer benefits, healthcare costs $20K/year - that\'s ' + pct + '% of your income! Many gig workers simply go uninsured.';
                } else if (income <= 100000) {
                    return '<strong>The gig penalty:</strong> Without employer help, you\'re paying $20K for healthcare - ' + pct + '% of income. Full-time W-2 workers get $17K of hidden employer support you don\'t.';
                } else {
                    return '<strong>The self-employment tax:</strong> Even at higher incomes, lack of employer benefits means paying the FULL cost yourself. This is a hidden $17K/year penalty for not having traditional employment.';
                }
            } else { // minimum
                if (currentState === 'non-expansion') {
                    return '<strong>The coverage gap:</strong> In non-expansion states, minimum wage workers often can\'t afford coverage. You may be too poor for ACA subsidies but not qualify for Medicaid.';
                }
                return '<strong>The subsidy cliff:</strong> At minimum wage, ACA subsidies help significantly, but out-of-pocket costs can still be a burden.';
            }
        }

        function updateDisplay() {
            // Get adjusted costs based on state Medicaid status
            const adjustedCosts = getAdjustedCosts(currentEmployment, currentIncome, currentState);
            const universalTax = Math.round(currentIncome * 0.08);

            // Handle $0 income case for percentages
            let currentPctVal, universalPctVal;
            if (currentIncome === 0) {
                currentPctVal = adjustedCosts.totalCost > 0 ? Infinity : 0;
                universalPctVal = 0;
            } else {
                currentPctVal = Math.round((adjustedCosts.totalCost / currentIncome) * 100);
                universalPctVal = Math.round((universalTax / currentIncome) * 100);
            }
            const savingsAmt = adjustedCosts.totalCost - universalTax;

            // Update cost breakdown
            costPremium.textContent = '$' + adjustedCosts.employeePays.toLocaleString() + '/yr';
            costOop.textContent = '$' + adjustedCosts.outOfPocket.toLocaleString() + '/yr';
            costTotal.textContent = '$' + adjustedCosts.totalCost.toLocaleString() + '/yr';

            // Show/hide employer row based on employment type
            if (adjustedCosts.employerPays > 0) {
                employerRow.style.display = 'flex';
                costEmployer.textContent = '$' + adjustedCosts.employerPays.toLocaleString() + '/yr';
            } else {
                employerRow.style.display = 'none';
            }

            // Update text values
            incomeAmount.textContent = incomeLabels[currentIncome];
            if (currentIncome === 0) {
                healthcarePctLabel.textContent = adjustedCosts.totalCost > 0 ? 'N/A' : '0%';
            } else {
                healthcarePctLabel.textContent = currentPctVal > 100 ? '>100%' : currentPctVal + '%';
            }

            // Calculate individual segment percentages (handle $0 income)
            let yourSharePct, employerSharePct, oopSharePct, totalHealthcarePct, remainingPct;
            if (currentIncome === 0) {
                // For $0 income, show bar as 100% healthcare cost (no remaining)
                yourSharePct = adjustedCosts.employeePays > 0 ? 33 : 0;
                employerSharePct = adjustedCosts.employerPays > 0 ? 34 : 0;
                oopSharePct = adjustedCosts.outOfPocket > 0 ? 33 : 0;
                totalHealthcarePct = 100;
                remainingPct = 0;
            } else {
                yourSharePct = Math.min(Math.round((adjustedCosts.employeePays / currentIncome) * 100), 100);
                employerSharePct = Math.min(Math.round((adjustedCosts.employerPays / currentIncome) * 100), 100);
                oopSharePct = Math.min(Math.round((adjustedCosts.outOfPocket / currentIncome) * 100), 100);
                totalHealthcarePct = Math.min(yourSharePct + employerSharePct + oopSharePct, 100);
                remainingPct = Math.max(100 - totalHealthcarePct, 0);
            }

            // Update bar chart segments
            barYourShare.style.width = yourSharePct + '%';
            barOopShare.style.width = oopSharePct + '%';
            barRemaining.style.width = remainingPct + '%';

            // Change oop-share color to yellow for Medicaid coverage
            const oopLegendItem = barLegend.querySelectorAll('.legend-item')[2];
            const oopLegendDot = oopLegendItem.querySelector('.legend-dot');
            if (adjustedCosts.isMedicaid) {
                barOopShare.style.background = 'var(--yellow)';
                oopLegendDot.style.background = 'var(--yellow)';
                oopLegendItem.innerHTML = '<span class="legend-dot oop-share" style="background: var(--yellow)"></span> Medicaid Coverage';
            } else {
                barOopShare.style.background = 'var(--red)';
                oopLegendDot.style.background = 'var(--red)';
                oopLegendItem.innerHTML = '<span class="legend-dot oop-share"></span> Out-of-Pocket';
            }

            // Show/hide employer share segment based on employment type
            if (adjustedCosts.employerPays > 0) {
                barEmployerShare.style.width = employerSharePct + '%';
                barEmployerShare.style.display = 'block';
            } else {
                barEmployerShare.style.width = '0%';
                barEmployerShare.style.display = 'none';
            }

            // Update legend to show/hide employer share
            const employerLegendItem = barLegend.querySelectorAll('.legend-item')[0];
            if (adjustedCosts.employerPays > 0) {
                employerLegendItem.style.display = 'flex';
            } else {
                employerLegendItem.style.display = 'none';
            }

            // Update comparison boxes
            if (currentIncome === 0) {
                currentPct.textContent = adjustedCosts.totalCost > 0 ? 'N/A' : '$0';
                universalPct.textContent = '$0';
            } else {
                currentPct.textContent = currentPctVal + '%';
                universalPct.textContent = universalPctVal + '%';
            }
            currentDetail.textContent = '$' + adjustedCosts.totalCost.toLocaleString() + '/year';

            // Handle negative savings (Medicaid is already cheap) and $0 income
            if (currentIncome === 0) {
                universalDetail.textContent = '$0/year (no income = no tax)';
            } else if (savingsAmt > 0) {
                universalDetail.textContent = '$' + universalTax.toLocaleString() + '/year (save $' + savingsAmt.toLocaleString() + ')';
            } else if (savingsAmt < 0) {
                universalDetail.textContent = '$' + universalTax.toLocaleString() + '/year';
            } else {
                universalDetail.textContent = '$' + universalTax.toLocaleString() + '/year (same cost)';
            }

            // Update insight
            incomeImpact.innerHTML = getInsight(currentIncome, currentEmployment, adjustedCosts);

            // Update employment note - use adjusted note if available
            const noteToShow = adjustedCosts.note;
            if (noteToShow) {
                employmentNote.innerHTML = noteToShow;
                employmentNote.style.display = 'block';
                // Use different styling for Medicaid vs warning
                if (adjustedCosts.isMedicaid) {
                    employmentNote.className = 'employment-note'; // Default purple style
                } else {
                    employmentNote.className = 'employment-note warning';
                }
            } else {
                employmentNote.style.display = 'none';
            }
        }

        // Function to update employment button availability based on income
        function updateEmploymentAvailability() {
            if (currentIncome === 0) {
                // $0 income = unemployed, gray out all employment types
                employmentBtns.forEach(btn => {
                    btn.classList.add('disabled');
                    btn.disabled = true;
                });
            } else {
                // Enable all employment types
                employmentBtns.forEach(btn => {
                    btn.classList.remove('disabled');
                    btn.disabled = false;
                });
            }
        }

        // Function to update state selector availability based on Medicaid eligibility
        function updateStateAvailability() {
            // Medicaid eligibility: $0 income OR (income <= $20K AND not full-time)
            const medicaidRelevant = currentIncome === 0 || (currentIncome <= 20000 && currentEmployment !== 'fulltime');

            if (medicaidRelevant) {
                stateSelect.disabled = false;
                stateSelect.style.opacity = '1';
                stateSelect.style.cursor = 'pointer';
            } else {
                stateSelect.disabled = true;
                stateSelect.style.opacity = '0.4';
                stateSelect.style.cursor = 'not-allowed';
            }
        }

        // Function to update income button availability - all income buttons always selectable
        function updateIncomeAvailability() {
            // All income buttons are always enabled
            incomeBtns.forEach(btn => {
                btn.classList.remove('disabled');
                btn.disabled = false;
            });
        }

        // Employment button handlers
        employmentBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                if (this.disabled) return;
                employmentBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentEmployment = this.dataset.employment;
                updateIncomeAvailability();
                updateStateAvailability();
                updateDisplay();
            });
        });

        // Income button handlers
        incomeBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                if (this.disabled) return;
                incomeBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentIncome = parseInt(this.dataset.income);
                updateEmploymentAvailability();
                updateStateAvailability();
                updateDisplay();
            });
        });

        // State selector handler
        stateSelect.addEventListener('change', function() {
            currentState = this.value;
            updateDisplay();
        });

        // Initialize
        updateIncomeAvailability();
        updateStateAvailability();
        updateDisplay();

        // Option 2: Dollar flow toggle
        const dollarBtns = document.querySelectorAll('.dollar-toggle-btn');
        const dollarFlow = document.getElementById('dollar-flow');

        const dollarData = {
            current: [
                { label: 'Insurance Admin', class: 'admin', pct: 18 },
                { label: 'Hospital Billing', class: 'billing', pct: 15 },
                { label: 'Pharma Marketing', class: 'pharma', pct: 12 },
                { label: 'Actual Care', class: 'care', pct: 55 }
            ],
            universal: [
                { label: 'Admin (Medicare)', class: 'admin', pct: 3 },
                { label: 'Hospital Billing', class: 'billing', pct: 2 },
                { label: 'Pharma (negotiated)', class: 'pharma', pct: 8 },
                { label: 'Actual Care', class: 'care', pct: 87 }
            ]
        };

        dollarBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                dollarBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');

                const system = this.dataset.system;
                const data = dollarData[system];

                dollarFlow.innerHTML = data.map(item => `
                    <div class="dollar-bar">
                        <span class="dollar-bar-label">${item.label}</span>
                        <div class="dollar-bar-track">
                            <div class="dollar-bar-fill ${item.class}" style="width: ${item.pct}%">${item.pct}%</div>
                        </div>
                    </div>
                `).join('');
            });
        });

        // Option 3: Country comparison
        const countryBtns = document.querySelectorAll('.country-btn');
        const countryStats = document.querySelectorAll('.country-stat');

        const countryData = {
            '🇺🇸 USA': {
                cost: '$12,530', costNote: 'Highest in world',
                life: '76.4 yrs', lifeNote: 'Rank: #46',
                uninsured: '8.6%', uninsuredNote: '~28 million people',
                bankruptcy: '66.5%', bankruptcyNote: 'of all bankruptcies'
            },
            '🇨🇦 Canada': {
                cost: '$5,370', costNote: '57% less than USA',
                life: '82.7 yrs', lifeNote: 'Rank: #16',
                uninsured: '0%', uninsuredNote: 'Universal coverage',
                bankruptcy: '8%', bankruptcyNote: 'of all bankruptcies'
            },
            '🇬🇧 UK': {
                cost: '$4,653', costNote: '63% less than USA',
                life: '81.8 yrs', lifeNote: 'Rank: #23',
                uninsured: '0%', uninsuredNote: 'NHS covers all',
                bankruptcy: '<1%', bankruptcyNote: 'Medical debt rare'
            },
            '🇩🇪 Germany': {
                cost: '$6,731', costNote: '46% less than USA',
                life: '81.4 yrs', lifeNote: 'Rank: #27',
                uninsured: '0.1%', uninsuredNote: 'Near universal',
                bankruptcy: '<1%', bankruptcyNote: 'Medical debt rare'
            }
        };

        countryBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                countryBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');

                const country = this.textContent;
                const data = countryData[country];

                const stats = document.querySelectorAll('.country-stat');
                stats[0].querySelector('.country-stat-value').textContent = data.cost;
                stats[0].querySelector('.country-stat-note').textContent = data.costNote;
                stats[1].querySelector('.country-stat-value').textContent = data.life;
                stats[1].querySelector('.country-stat-note').textContent = data.lifeNote;
                stats[2].querySelector('.country-stat-value').textContent = data.uninsured;
                stats[2].querySelector('.country-stat-note').textContent = data.uninsuredNote;
                stats[3].querySelector('.country-stat-value').textContent = data.bankruptcy;
                stats[3].querySelector('.country-stat-note').textContent = data.bankruptcyNote;
            });
        });

        // Option 4: Risk Pool Simulator
        const poolBtns = document.querySelectorAll('.pool-btn[data-pool]');
        const poolPeople = document.getElementById('pool-people');
        const poolTitle = document.getElementById('pool-title');
        const poolStats = document.getElementById('pool-stats');
        const poolCost = document.getElementById('pool-cost');
        const poolEvent = document.getElementById('pool-event');
        const poolInsight = document.getElementById('pool-insight');
        const addSickBtn = document.getElementById('add-sick-btn');
        const simulateBtn = document.getElementById('simulate-btn');
        const resetPoolBtn = document.getElementById('reset-pool-btn');

        const poolConfig = {
            small: { size: 10, name: 'Small Company Pool', baseSick: 2, maxDisplay: 10 },
            medium: { size: 50, name: 'Large Company Pool', baseSick: 9, maxDisplay: 25 },
            large: { size: 330000000, name: 'Universal Pool (330M Americans)', baseSick: 60000000, maxDisplay: 40 }
        };

        let currentPool = 'small';
        let sickCount = 2;
        let totalPeople = 10;

        function renderPool() {
            const config = poolConfig[currentPool];
            const displayCount = config.maxDisplay;
            const sickRatio = sickCount / totalPeople;
            const displaySick = Math.round(displayCount * sickRatio);

            // Generate people dots
            let html = '';
            for (let i = 0; i < displayCount; i++) {
                const isSick = i < displaySick;
                html += `<span class="person ${isSick ? 'sick' : 'healthy'}"></span>`;
            }
            poolPeople.innerHTML = html;

            // Update title
            poolTitle.textContent = config.name;

            // Update stats
            const pctSick = Math.round((sickCount / totalPeople) * 100);
            if (currentPool === 'large') {
                poolStats.innerHTML = `<span>330M people</span><span>${pctSick}% need care</span>`;
            } else {
                poolStats.innerHTML = `<span>${totalPeople} people</span><span>${pctSick}% sick</span>`;
            }

            // Calculate cost - base $400/mo, each sick person adds cost split across pool
            const sickCostPerPerson = 3000; // Monthly cost of a sick person
            const baseCost = 400;
            const totalSickCosts = sickCount * sickCostPerPerson;
            const costPerPerson = Math.round(baseCost + (totalSickCosts / totalPeople));

            poolCost.textContent = '$' + costPerPerson.toLocaleString();

            // Color based on cost
            poolCost.className = 'pool-cost-value';
            if (costPerPerson > 800) poolCost.classList.add('high');
            else if (costPerPerson > 600) poolCost.classList.add('medium');
            else poolCost.classList.add('low');
        }

        function showEvent(message, isSuccess = false) {
            poolEvent.textContent = message;
            poolEvent.className = 'pool-event show' + (isSuccess ? ' success' : '');
            setTimeout(() => poolEvent.classList.remove('show'), 4000);
        }

        function updateInsight() {
            const pctSick = Math.round((sickCount / totalPeople) * 100);
            if (currentPool === 'small' && pctSick > 30) {
                poolInsight.innerHTML = `<strong>Problem:</strong> In a small pool, just a few sick people drive up costs for everyone. Premiums become unpredictable and expensive.`;
            } else if (currentPool === 'large') {
                poolInsight.innerHTML = `<strong>Key insight:</strong> With everyone in one pool, costs are predictable. Adding one sick person to 330 million barely changes anyone's premium.`;
            } else {
                poolInsight.innerHTML = `<strong>Try it:</strong> Click "Add Sick Person" to see how one person with high costs affects everyone's premium. Then switch to a larger pool to see the difference.`;
            }
        }

        // Pool size buttons
        poolBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                poolBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentPool = this.dataset.pool;
                const config = poolConfig[currentPool];
                totalPeople = config.size;
                sickCount = config.baseSick;
                renderPool();
                updateInsight();
                poolEvent.classList.remove('show');
            });
        });

        // Add sick person
        addSickBtn.addEventListener('click', function() {
            if (currentPool === 'large') {
                sickCount += 1000000; // Add a million sick people to show scale
                showEvent('Added 1 million people needing care. Notice the premium barely changed!', true);
            } else {
                sickCount += 1;
                totalPeople += 1;
                const config = poolConfig[currentPool];
                const costBefore = Math.round(400 + ((sickCount - 1) * 3000 / (totalPeople - 1)));
                const costAfter = Math.round(400 + (sickCount * 3000 / totalPeople));
                const increase = costAfter - costBefore;
                showEvent(`Someone got diagnosed with a chronic illness. Everyone's premium went up $${increase}/month!`);
            }
            renderPool();
            updateInsight();
        });

        // Simulate year
        simulateBtn.addEventListener('click', function() {
            const config = poolConfig[currentPool];
            if (currentPool === 'small') {
                // Small pools: random chance of major event
                if (Math.random() > 0.5) {
                    sickCount += 2;
                    showEvent('Bad year: 2 employees were diagnosed with serious conditions. Premiums spike!');
                } else {
                    sickCount = Math.max(1, sickCount - 1);
                    showEvent('Good year: One sick employee recovered. Premiums decreased slightly.', true);
                }
            } else if (currentPool === 'medium') {
                const change = Math.floor(Math.random() * 5) - 2;
                sickCount = Math.max(5, sickCount + change);
                if (change > 0) {
                    showEvent(`This year: ${change} more employees needed care. Premium increased modestly.`);
                } else {
                    showEvent('Stable year: Large pool absorbed changes with minimal impact.', true);
                }
            } else {
                showEvent('Universal pool: Costs vary less than 1% year-to-year because risk is spread across everyone.', true);
            }
            renderPool();
            updateInsight();
        });

        // Reset
        resetPoolBtn.addEventListener('click', function() {
            const config = poolConfig[currentPool];
            totalPeople = config.size;
            sickCount = config.baseSick;
            renderPool();
            updateInsight();
            poolEvent.classList.remove('show');
        });

        // Initial render
        renderPool();

        // Option 5: Scenario buttons
        const scenarioBtns = document.querySelectorAll('.scenario-btn');
        const scenarioData = {
            '🤰 Have a Baby': {
                current: '$4,500',
                currentItems: ['$2,500 deductible', '$1,200 copays (visits, labs)', '$800 "surprise" bills', '+ Monthly premiums'],
                universal: '$0',
                universalItems: ['All prenatal care covered', 'Hospital stay covered', 'No surprise bills', 'No additional cost']
            },
            '🦴 Break a Leg': {
                current: '$7,500',
                currentItems: ['$2,500 deductible', '$2,000 ER copay', '$1,500 surgery copay', '$1,500 physical therapy'],
                universal: '$0',
                universalItems: ['ER visit covered', 'Surgery covered', 'Physical therapy covered', 'No out-of-pocket costs']
            },
            '🎗️ Cancer Treatment': {
                current: '$12,000+',
                currentItems: ['Hit out-of-pocket max', 'Prior authorization delays', 'Some drugs not covered', 'Risk of "network" issues'],
                universal: '$0',
                universalItems: ['All treatment covered', 'No authorization delays', 'All drugs included', 'Focus on recovery']
            },
            '💊 Routine Checkup': {
                current: '$250',
                currentItems: ['$50 copay', '$150 lab work', '$50 if anything found', 'Many skip due to cost'],
                universal: '$0',
                universalItems: ['Checkup covered', 'Labs covered', 'Preventive care free', 'No reason to skip']
            },
            '🏥 ER Visit': {
                current: '$2,200',
                currentItems: ['$500 ER copay', '$1,200 tests/scans', '$500 doctor fees', 'Surprise billing risk'],
                universal: '$0',
                universalItems: ['ER covered', 'All tests covered', 'No surprise bills', 'No hesitation to go']
            }
        };

        scenarioBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                scenarioBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');

                const scenario = this.textContent;
                const data = scenarioData[scenario];

                document.querySelector('.scenario-box.current .scenario-box-amount').textContent = data.current;
                document.querySelector('.scenario-box.current .scenario-box-items').innerHTML =
                    data.currentItems.map(item => `<li>${item}</li>`).join('');

                document.querySelector('.scenario-box.universal .scenario-box-amount').textContent = data.universal;
                document.querySelector('.scenario-box.universal .scenario-box-items').innerHTML =
                    data.universalItems.map(item => `<li>${item}</li>`).join('');
            });
        });

        // Widget 6: Healthcare Tiers Interactive
        const tierCards = document.querySelectorAll('.tier-card');
        const tierComparison = document.getElementById('tier-comparison');
        const tierComparisonHeader = document.getElementById('tier-comparison-header');
        const tierCostValue = document.getElementById('tier-cost-value');
        const tierSavings = document.getElementById('tier-savings');
        const tierCoverage = document.getElementById('tier-coverage');

        const tierData = {
            basic: {
                name: 'Universal Basic',
                cost: '$0 (tax-funded)',
                annualCost: 0,
                savings: '$9,575/year',
                coverage: 'Same or better for 95% of healthcare needs'
            },
            plus: {
                name: 'Plus Tier',
                cost: '$1,800/year ($150/mo)',
                annualCost: 1800,
                savings: '$7,775/year',
                coverage: 'All basic + private rooms, faster appointments, expanded dental/vision'
            },
            premium: {
                name: 'Premium Tier',
                cost: '$4,800/year ($400/mo)',
                annualCost: 4800,
                savings: '$4,775/year',
                coverage: 'All basic + plus + concierge care, experimental treatments, VIP access'
            }
        };

        tierCards.forEach(card => {
            card.addEventListener('click', function() {
                const tier = this.dataset.tier;
                const data = tierData[tier];

                // Update selection
                tierCards.forEach(c => c.classList.remove('selected'));
                this.classList.add('selected');

                // Update comparison
                tierComparisonHeader.textContent = `${data.name} vs. Current System`;
                tierCostValue.textContent = data.cost;
                tierSavings.textContent = data.savings;
                tierCoverage.textContent = data.coverage;

                // Show comparison
                tierComparison.classList.add('show');
            });
        });

        // Widget 7: Tax Dollars Interactive
        const taxRows = document.querySelectorAll('.tax-row, .tax-leakage');
        const taxViewBtns = document.querySelectorAll('.tax-view-btn');
        const taxTotalValue = document.getElementById('tax-total-value');
        const taxTotalNote = document.getElementById('tax-total-note');
        const taxInsight = document.getElementById('tax-insight');

        // Click to expand details
        taxRows.forEach(row => {
            row.addEventListener('click', function() {
                const program = this.dataset.program;
                const detail = document.getElementById('detail-' + program);

                // Close all other details
                document.querySelectorAll('.tax-detail').forEach(d => {
                    if (d !== detail) d.classList.remove('show');
                });
                taxRows.forEach(r => {
                    if (r !== this) r.classList.remove('highlighted');
                });

                // Toggle this one
                if (detail) {
                    detail.classList.toggle('show');
                    this.classList.toggle('highlighted');
                }
            });
        });

        // View toggle
        const taxViews = {
            programs: {
                total: '$2.1 Trillion/year',
                note: "That's ~$6,400 per person - already more than Canada spends TOTAL ($5,370)"
            },
            destination: {
                total: '$1.9T to actual care, $200B to profits',
                note: "For every $10 spent, nearly $1 goes to insurance admin, marketing, and executive pay"
            },
            perperson: {
                total: '$6,400 per American',
                note: "You're already paying for universal healthcare through taxes - but not getting it"
            }
        };

        taxViewBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const view = this.dataset.view;
                const data = taxViews[view];

                taxViewBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');

                taxTotalValue.textContent = data.total;
                taxTotalNote.textContent = data.note;
            });
        });

        // Widget 8: Corporate Healthcare Shuffle with Step Animation
        const shuffleBtns = document.querySelectorAll('.shuffle-btn');
        const shuffleFlow = document.getElementById('shuffle-flow');
        const shuffleWinner = document.getElementById('shuffle-winner');
        const shuffleResult = document.getElementById('shuffle-result');
        const shuffleInsight = document.getElementById('shuffle-insight');
        const shufflePrev = document.getElementById('shuffle-prev');
        const shuffleNext = document.getElementById('shuffle-next');
        const shuffleShowAll = document.getElementById('shuffle-show-all');

        let currentShuffleView = 'insurance';
        let currentStep = 0;

        const shuffleData = {
            insurance: {
                winner: 'Insurance shareholders (+$30B/year profits)',
                steps: [
                    { num: 1, text: 'You pay $500/mo premium', amount: '$6,000/yr', type: '' },
                    { num: 2, text: 'Employer pays $17,000 (could be your wages)', amount: '-$17,000', type: 'worker' },
                    { num: 3, text: 'Insurer keeps 15-20% for admin & profit', amount: '$4,600', type: 'profit' },
                    { num: 4, text: 'Insurer denies 17% of claims to save money', amount: 'Denied', type: 'profit' },
                    { num: 5, text: 'CEO makes $20M+/year salary', amount: '$20M+', type: 'profit' },
                    { num: 6, text: 'You still pay copays, deductibles, surprise bills', amount: '+$3,000', type: 'worker' }
                ]
            },
            pharma: {
                winner: 'Pharma executives & shareholders',
                steps: [
                    { num: 1, text: 'Drug costs $5 to manufacture', amount: '$5', type: '' },
                    { num: 2, text: 'Company claims "R&D costs" (but spends 2x more on marketing)', amount: '+$50', type: 'profit' },
                    { num: 3, text: 'PBM (pharmacy middleman) adds their cut', amount: '+$30', type: 'profit' },
                    { num: 4, text: 'No government negotiation allowed (until 2026 for 10 drugs)', amount: 'No limit', type: 'profit' },
                    { num: 5, text: 'You pay $300 for a drug that costs $5 to make', amount: '$300', type: 'worker' },
                    { num: 6, text: 'Same drug in Canada: $50', amount: '$50 🇨🇦', type: '' }
                ]
            },
            hospital: {
                winner: 'Private equity & hospital executives',
                steps: [
                    { num: 1, text: 'Hospital gets bought by private equity', amount: 'Acquired', type: '' },
                    { num: 2, text: 'Staff cut, services reduced', amount: '-20% staff', type: 'profit' },
                    { num: 3, text: 'Chargemaster prices inflated 10x', amount: '$50→$500', type: 'profit' },
                    { num: 4, text: 'ER doctors "out of network" (surprise billing)', amount: '+$2,000', type: 'worker' },
                    { num: 5, text: 'Hospital pays no property taxes (nonprofit status)', amount: '$0 taxes', type: 'profit' },
                    { num: 6, text: 'CEO salary: $5-20M; nurses stretched thin', amount: '$10M CEO', type: 'profit' }
                ]
            }
        };

        function renderShuffle(view, showUpTo = 0) {
            const data = shuffleData[view];
            shuffleFlow.innerHTML = data.steps.map((step, i) => `
                <div class="shuffle-step ${step.type} ${i < showUpTo ? 'visible' : ''}">
                    <span class="shuffle-step-num">${step.num}</span>
                    <span class="shuffle-step-text">${step.text}</span>
                    <span class="shuffle-step-amount">${step.amount}</span>
                </div>
            `).join('');
            shuffleWinner.textContent = data.winner;

            // Show result only when all steps visible
            if (showUpTo >= data.steps.length) {
                shuffleResult.style.display = 'block';
                shuffleInsight.innerHTML = `<strong>The result:</strong> ${data.winner}. This is why healthcare costs keep rising.`;
            } else {
                shuffleResult.style.display = 'none';
                shuffleInsight.innerHTML = `<strong>Step ${showUpTo + 1} of ${data.steps.length}:</strong> Click "Next Step" to see how money flows through the system.`;
            }
        }

        shuffleBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                shuffleBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentShuffleView = this.dataset.view;
                currentStep = 0;
                renderShuffle(currentShuffleView, 0);
            });
        });

        shuffleNext.addEventListener('click', function() {
            const maxSteps = shuffleData[currentShuffleView].steps.length;
            if (currentStep < maxSteps) {
                currentStep++;
                renderShuffle(currentShuffleView, currentStep);
            }
        });

        shufflePrev.addEventListener('click', function() {
            if (currentStep > 0) {
                currentStep--;
                renderShuffle(currentShuffleView, currentStep);
            }
        });

        shuffleShowAll.addEventListener('click', function() {
            currentStep = shuffleData[currentShuffleView].steps.length;
            renderShuffle(currentShuffleView, currentStep);
        });

        // Initial render
        renderShuffle('insurance', 0);

        // Widget 9: Coverage Explorer
        const coverageScenarioBtns = document.querySelectorAll('.coverage-scenario-btn');
        const coverageResult = document.getElementById('coverage-result');
        const coverageResultHeader = document.getElementById('coverage-result-header');
        const coverageResultText = document.getElementById('coverage-result-text');
        const coveredList = document.getElementById('covered-list');
        const optionalList = document.getElementById('optional-list');

        const coverageScenarios = {
            general: {
                header: 'General Coverage',
                text: 'For everyday health needs, basic coverage handles it all: checkups, prescriptions, ER visits, surgeries. You\'d only pay extra for cosmetic procedures or luxury amenities.',
                highlight: ['checkups', 'vaccines', 'rx', 'er']
            },
            pregnancy: {
                header: 'Pregnancy & Birth',
                text: 'ALL prenatal care, delivery, hospital stay, and newborn care is covered. Currently this costs American families $4,500+ out of pocket. Optional: private birthing suites, doulas.',
                highlight: ['maternity', 'hospital', 'checkups', 'labs']
            },
            chronic: {
                header: 'Chronic Illness (Diabetes, Heart Disease, etc.)',
                text: 'Ongoing care, medications, specialists, monitoring - all covered with no copays piling up. Currently, Americans with chronic conditions pay $5,000+ annually in out-of-pocket costs.',
                highlight: ['chronic', 'rx', 'checkups', 'labs', 'surgery']
            },
            elderly: {
                header: 'Senior Care',
                text: 'Prescriptions, specialists, surgeries, physical therapy, chronic disease management - all covered. Many seniors currently choose between food and medicine. Not anymore.',
                highlight: ['rx', 'chronic', 'pt', 'surgery', 'hospital', 'checkups']
            },
            accident: {
                header: 'Accident & Emergency',
                text: 'ER visit, surgery, hospital stay, physical therapy, follow-up care - ALL covered. No $2,000 ER copays, no surprise bills, no choosing between debt and treatment.',
                highlight: ['er', 'hospital', 'surgery', 'pt', 'labs']
            }
        };

        coverageScenarioBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const scenario = this.dataset.scenario;
                const data = coverageScenarios[scenario];

                coverageScenarioBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');

                // Update result
                coverageResultHeader.textContent = data.header;
                coverageResultText.textContent = data.text;
                coverageResult.classList.add('show');

                // Highlight relevant items
                coveredList.querySelectorAll('li').forEach(li => {
                    li.classList.remove('expanded');
                    if (data.highlight.includes(li.dataset.item)) {
                        li.classList.add('expanded');
                    }
                });
            });
        });

        // Click to expand individual items
        document.querySelectorAll('.coverage-list li').forEach(li => {
            li.addEventListener('click', function(e) {
                e.stopPropagation();
                this.classList.toggle('expanded');
            });
        });
    </script>
</body>
</html>
